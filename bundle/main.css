:root{--bg-color-light:#fdf8f0;--text-color-light:#4b4237;--container-bg-light:#f7f3e9;--border-color-light:#eae0d3;--header-color-light:#6d5d4b;--h2-color-light:#8c6d46;--h2-border-light:#b99c7a;--sub-text-color-light:#8c7b6a;--quote-bg-light:#f2eee5;--strong-bg-light:#eadcb5;--highlight-color:#ffe875;--chat-ai-bg-light:#e9e4db;--pin-color:#e58a8a;--correct-color:#3e8e41;--incorrect-color:#d9534f;--bg-color-dark:#121212;--text-color-dark:#e0e0e0;--container-bg-dark:#1e1e1e;--border-color-dark:#333;--header-color-dark:#d4b28c;--h2-color-dark:#b99c7a;--h2-border-dark:#8c6d46;--sub-text-color-dark:#9e9e9e;--quote-bg-dark:#2a2a2a;--strong-bg-dark:#5a4a3a;--chat-ai-bg-dark:#2c2c2c;--correct-color-dark:#66bb6a;--incorrect-color-dark:#ef5350}html{scroll-behavior:smooth}body{box-sizing:border-box;font-family:Gowun Batang,serif;line-height:1.8;margin:0;padding:80px 20px 20px;transition:background-color .3s,color .3s}body.dark-mode{background-color:var(--bg-color-dark);color:var(--text-color-dark)}body:not(.dark-mode){background-color:var(--bg-color-light);color:var(--text-color-light)}#immersive-header{align-items:center;backdrop-filter:blur(8px);display:flex;justify-content:space-between;left:0;padding:10px 20px;position:fixed;right:0;top:0;transform:translateY(-100%);transition:transform .4s ease-in-out,background-color .3s;z-index:1000}body.header-visible #immersive-header{transform:translateY(0)}body.dark-mode #immersive-header{background-color:hsla(0,0%,7%,.7);border-bottom:1px solid var(--border-color-dark)}body:not(.dark-mode) #immersive-header{background-color:hsla(37,76%,97%,.7);border-bottom:1px solid var(--border-color-light)}.header-group{align-items:center;display:flex;gap:20px}.header-group.left{flex:1 1 0;justify-content:flex-start}.header-group.center{flex:2 1 0;justify-content:center}.header-group.right{flex:1 1 0;justify-content:flex-end}.brand-logo{font-family:Nanum Pen Script,cursive;font-size:1.7em;font-weight:700;letter-spacing:.5px;opacity:0;transition:opacity .5s ease-in-out;user-select:none;visibility:hidden}body:not(.dark-mode) .brand-logo{color:var(--header-color-light)}body.dark-mode .brand-logo{color:var(--header-color-dark)}.brand-logo small{font-size:.6em;font-weight:400;margin-left:4px;vertical-align:middle}body:not(.dark-mode) .brand-logo small{color:var(--sub-text-color-light)}body.dark-mode .brand-logo small{color:var(--sub-text-color-dark)}::-webkit-scrollbar{height:8px;width:8px}::-webkit-scrollbar-track{background:transparent}body.dark-mode ::-webkit-scrollbar-thumb{background-clip:content-box;background-color:var(--border-color-dark);border:2px solid transparent;border-radius:10px}body.dark-mode ::-webkit-scrollbar-thumb:hover{background-color:var(--sub-text-color-dark)}body:not(.dark-mode) ::-webkit-scrollbar-thumb{background-clip:content-box;background-color:var(--sub-text-color-light);border:2px solid transparent;border-radius:10px}body:not(.dark-mode) ::-webkit-scrollbar-thumb:hover{background-color:var(--header-color-light)}.wrapper{display:flex;gap:20px;justify-content:center;margin:20px auto;max-width:1100px}.container{border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.07);flex-grow:1;max-width:800px;padding:30px 40px}.header{margin-bottom:30px;padding-bottom:20px;text-align:center}body.dark-mode .header{border-bottom:2px solid var(--border-color-dark)}body:not(.dark-mode) .header{border-bottom:2px solid var(--border-color-light)}.header h1{font-family:"Noto Serif KR",serif;font-size:2.8em;font-weight:600;margin:0}body.dark-mode .header h1{color:var(--header-color-dark)}body:not(.dark-mode) .header h1{color:var(--header-color-light)}.header .subtitle{font-size:1.1em}body.dark-mode .header .subtitle{color:var(--sub-text-color-dark)}body:not(.dark-mode) .header .subtitle{color:var(--sub-text-color-light)}.content-section{margin-bottom:35px;padding-top:20px;position:relative}.content-section h2{font-family:"Noto Serif KR",serif;font-size:1.8em;margin-bottom:20px;padding-left:15px}body.dark-mode .content-section h2{border-left:4px solid var(--h2-border-dark);color:var(--h2-color-dark)}body:not(.dark-mode) .content-section h2{border-left:4px solid var(--h2-border-light);color:var(--h2-color-light)}.content-section p{font-size:1.1em;margin-bottom:15px;text-align:justify}.content-section ul{list-style-position:inside;padding-left:5px}.content-section li{margin-bottom:8px}.content-section p strong{border-radius:4px;font-weight:700;padding:0 6px}body.dark-mode .content-section p strong{background-color:var(--strong-bg-dark);color:var(--text-color-dark)}body:not(.dark-mode) .content-section p strong{background-color:var(--strong-bg-light);color:var(--header-color-light)}blockquote{font-style:italic;margin:25px 0;padding:15px 25px}body.dark-mode blockquote{background-color:var(--quote-bg-dark);border-left:3px solid var(--border-color-dark);color:var(--sub-text-color-dark)}body:not(.dark-mode) blockquote{background-color:var(--quote-bg-light);border-left:3px solid var(--border-color-light);color:var(--sub-text-color-light)}.keyword-list{align-items:center;border-radius:8px;display:flex;flex-wrap:wrap;gap:12px;margin:10px 0;padding:20px}body.dark-mode .keyword-list{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .keyword-list{background-color:var(--quote-bg-light)}.keyword-chip{background-color:#b97f74;border-radius:15px;box-shadow:0 2px 4px rgba(0,0,0,.1);color:#faf7f2;font-size:1em;font-weight:700;padding:5px 13px}.text-highlight,mark{background-color:var(--highlight-color);border-radius:3px;color:#1a1a1a;cursor:pointer;padding:2px 4px;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out}.text-highlight:hover,mark:hover{background-color:#ffd900;box-shadow:0 0 5px rgba(255,217,0,.7)}@keyframes content-fade-out{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-10px)}}@keyframes block-fade-in-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}#live-debugger-panel{backdrop-filter:blur(5px);background-color:rgba(0,0,0,.85);border:1px solid #555;border-radius:10px;bottom:20px;box-shadow:0 5px 20px rgba(0,0,0,.4);color:#f0f0f0;display:flex;flex-direction:column;font-family:D2Coding,Consolas,monospace;font-size:12px;height:300px;position:fixed;right:20px;width:450px;z-index:9999}#live-debugger-header{align-items:center;background-color:#333;border-bottom:1px solid #555;display:flex;font-weight:700;justify-content:space-between;padding:8px 12px}#live-debugger-header span{color:#ff6b6b}#live-debugger-header button{background:#555;border:1px solid #777;border-radius:4px;color:#fff;cursor:pointer;font-size:11px;padding:2px 8px}#live-debugger-header button:hover{background:#666}#live-debugger-content{flex-grow:1;line-height:1.6;overflow-y:auto;padding:10px}.trace-log-entry{border-bottom:1px dotted #444;margin-bottom:8px;padding-bottom:8px}.trace-log-entry:last-child{border-bottom:none}.trace-timestamp{color:#888;margin-right:8px}.trace-source{font-weight:700;margin-right:5px}.trace-source-UI{color:#74b9ff}.trace-source-Firestore{color:#fdcb6e}.trace-source-API{color:#a29bfe}.trace-source-System{color:#55efc4}.trace-eventName{color:#dfe6e9}.trace-context{color:#fab1a0;font-style:italic;margin:0 5px}.trace-details{color:#b2bec3}.trace-snapshot{background-color:hsla(0,0%,100%,.05);border-radius:4px;margin-top:5px;padding:5px}.trace-snapshot-key{color:#00b894;font-weight:700}.trace-snapshot-value{color:#e17055}.trace-level-WARN{border-left:2px solid #fdcb6e;padding-left:8px}.trace-level-ERROR{background-color:rgba(214,48,49,.1);border-left:2px solid #d63031;padding-left:8px}.interactive-recall-welcome{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;opacity:.7;padding:50px;text-align:center}.interactive-recall-welcome h2{font-family:"Noto Serif KR",serif}.interactive-recall-welcome p{margin:5px 0}@media print{#drawing-canvas-overlay,#drawing-toolbar,#header-visibility-toggle,#immersive-header,#selection-popover,.custom-modal-overlay,.draggable-panel,.fixed-tool-container{display:none!important}.wrapper,body{margin:0!important;padding:0!important}.container,.wrapper{max-width:100%!important}.container{border:none!important;border-radius:0!important;box-shadow:none!important;margin:0!important;padding:2cm!important}body,body.dark-mode{background-color:var(--bg-color-light)!important;color:var(--text-color-light)!important}.header h1,body.dark-mode .header h1{color:var(--header-color-light)!important}.header,body.dark-mode .header{border-bottom-color:var(--border-color-light)!important}.header .subtitle,body.dark-mode .header .subtitle{color:var(--sub-text-color-light)!important}.content-section h2,body.dark-mode .content-section h2{border-left-color:var(--h2-border-light)!important;color:var(--h2-color-light)!important}blockquote,body.dark-mode blockquote{background-color:var(--quote-bg-light)!important;border-left-color:var(--border-color-light)!important;color:var(--sub-text-color-light)!important}.content-section p strong,body.dark-mode .content-section p strong{background-color:var(--strong-bg-light)!important;color:var(--header-color-light)!important}.keyword-list,body.dark-mode .keyword-list{background-color:var(--quote-bg-light)!important}a{color:#00e!important;text-decoration:underline!important}}.custom-modal-overlay{align-items:center;background:rgba(0,0,0,.6);display:none;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:2000}.custom-modal{border-radius:10px;max-width:450px;padding:30px;text-align:center;width:90%}body:not(.dark-mode) .custom-modal{background-color:var(--bg-color-light)}body.dark-mode .custom-modal{background-color:var(--container-bg-dark)}.custom-modal-actions{display:flex;gap:15px;justify-content:center;margin-top:20px}.modal-btn{border:none;border-radius:5px;cursor:pointer;padding:10px 25px}#api-settings-save-btn,#modal-confirm-btn,#prompt-save-btn,.modal-btn.confirm{background-color:#8c6d4b;color:#fff}#api-settings-cancel-btn,#modal-cancel-btn,#prompt-cancel-btn,.modal-btn.cancel{background-color:#888;color:#fff}.modal-btn.secondary{border:1px solid transparent}body:not(.dark-mode) .modal-btn.secondary{background-color:#e0e0e0;border-color:#ccc;color:#333}body:not(.dark-mode) .modal-btn.secondary:hover{background-color:#d4d4d4}body.dark-mode .modal-btn.secondary{background-color:#555;border-color:#666;color:var(--text-color-dark)}body.dark-mode .modal-btn.secondary:hover{background-color:#666}.modal-btn.with-icon{align-items:center;display:inline-flex;gap:8px}.modal-btn.with-icon svg{fill:currentColor}.api-settings-modal{display:flex;flex-direction:column;height:auto;max-height:85vh;max-width:900px;overflow:hidden;padding:0;text-align:left;width:95%}.api-settings-layout{display:flex;flex-grow:1;min-height:0;overflow:hidden}.api-preset-list-container{display:flex;flex-direction:column;flex-shrink:0;padding:20px;width:250px}body:not(.dark-mode) .api-preset-list-container{background-color:var(--bg-color-light);border-right:1px solid var(--border-color-light)}body.dark-mode .api-preset-list-container{background-color:var(--bg-color-dark);border-right:1px solid var(--border-color-dark)}.api-preset-list-container h3{margin-bottom:15px;margin-top:0;text-align:center}#api-preset-list{flex-grow:1;margin-bottom:15px;min-height:300px;overflow-y:auto}.empty-preset-message{font-size:.9em;opacity:.7;padding:20px;text-align:center}.api-preset-item{border:2px solid transparent;border-radius:6px;cursor:pointer;margin-bottom:8px;padding:10px 12px;position:relative;transition:background-color .2s}.api-preset-item:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .api-preset-item:hover{background-color:var(--quote-bg-light)}.api-preset-item.selected{font-weight:700}body:not(.dark-mode) .api-preset-item.selected{background-color:var(--strong-bg-light);border-color:var(--header-color-light)}body.dark-mode .api-preset-item.selected{background-color:var(--strong-bg-dark);border-color:var(--header-color-dark)}.preset-name{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.preset-provider{font-size:.8em;opacity:.7;text-transform:capitalize}.preset-active-indicator{border-radius:50%;height:8px;position:absolute;right:12px;top:50%;transform:translateY(-50%);width:8px}body:not(.dark-mode) .preset-active-indicator{background-color:var(--correct-color)}body.dark-mode .preset-active-indicator{background-color:var(--correct-color-dark)}.api-preset-editor-container{box-sizing:border-box;flex-grow:1;overflow-y:auto;padding:20px 30px}.api-preset-editor-container h3{margin-bottom:25px;margin-top:0}.api-settings-modal .custom-modal-actions{flex-shrink:0;justify-content:flex-end;margin:0;padding:20px 30px}body:not(.dark-mode) .api-settings-modal .custom-modal-actions{border-top:1px solid var(--border-color-light)}body.dark-mode .api-settings-modal .custom-modal-actions{border-top:1px solid var(--border-color-dark)}#api-settings-delete-btn{background-color:#a94442;margin-right:auto}.api-form-section{margin-bottom:20px}.api-form-section label{display:block;font-size:1em;font-weight:700;margin-bottom:8px}.api-form-section small{display:block;font-size:.8em;margin-top:5px;opacity:.7}.api-key-wrapper{align-items:center;display:flex;gap:10px}.api-settings-modal input[type=number],.api-settings-modal input[type=password],.api-settings-modal input[type=text],.api-settings-modal select{background-color:var(--bg-color-dark);border:1px solid var(--border-color-dark);border-radius:6px;box-sizing:border-box;color:var(--text-color-dark);font-family:Gowun Batang,serif;font-size:1em;padding:10px 12px;width:100%}body:not(.dark-mode) .api-settings-modal input,body:not(.dark-mode) .api-settings-modal select{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}.api-key-wrapper input{flex-grow:1}#verify-api-key-btn{background-color:var(--h2-color-dark);border:none;border-radius:6px;color:#fff;cursor:pointer;font-family:Gowun Batang,serif;padding:10px 15px;white-space:nowrap}body:not(.dark-mode) #verify-api-key-btn{background-color:var(--h2-color-light)}#verify-api-key-btn:disabled{cursor:not-allowed;opacity:.5}#api-key-status{font-size:.85em;font-weight:700;margin-top:8px;min-height:1.2em}.status-loading{color:var(--h2-color-dark)}body:not(.dark-mode) .status-loading{color:var(--h2-color-light)}.status-success{color:var(--correct-color-dark)}body:not(.dark-mode) .status-success{color:var(--correct-color)}.status-error{color:var(--incorrect-color-dark)}body:not(.dark-mode) .status-error{color:var(--incorrect-color)}#api-model-search-input{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);border-radius:6px;box-sizing:border-box;color:var(--text-color-dark);font-family:Gowun Batang,serif;font-size:.95em;padding:10px 12px;transition:border-color .2s,box-shadow .2s;width:100%}body:not(.dark-mode) #api-model-search-input{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}#api-model-search-input:focus{border-color:var(--header-color-dark);box-shadow:0 0 0 2px hsla(32,46%,69%,.2);outline:none}body:not(.dark-mode) #api-model-search-input:focus{border-color:var(--header-color-light);box-shadow:0 0 0 2px rgba(109,93,75,.2)}#api-model-search-input::placeholder{color:var(--sub-text-color-dark);opacity:.7}body:not(.dark-mode) #api-model-search-input::placeholder{color:var(--sub-text-color-light)}#api-model-search-input::-webkit-search-cancel-button{-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%239E9E9E'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E");background-size:16px 16px;cursor:pointer;height:16px;opacity:.7;transition:opacity .2s;width:16px}#api-model-search-input::-webkit-search-cancel-button:hover{opacity:1}.api-slider-group{align-items:center;display:flex;justify-content:space-between;margin-bottom:8px}.api-slider-group label{margin-bottom:0}.api-slider-group span{font-family:D2Coding,Consolas,monospace;font-size:1.1em;font-weight:700}.api-settings-modal input[type=range]{-webkit-appearance:none;appearance:none;border-radius:3px;height:6px;margin:10px 0;outline:none;padding:0;width:100%}body:not(.dark-mode) .api-settings-modal input[type=range]{background:var(--border-color-light)}body.dark-mode .api-settings-modal input[type=range]{background:var(--border-color-dark)}.api-settings-modal input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;border:3px solid;border-radius:50%;cursor:pointer;height:18px;transition:background-color .2s;width:18px}.api-settings-modal input[type=range]::-moz-range-thumb{border:3px solid;border-radius:50%;cursor:pointer;height:18px;transition:background-color .2s;width:18px}body:not(.dark-mode) .api-settings-modal input[type=range]::-moz-range-thumb,body:not(.dark-mode) .api-settings-modal input[type=range]::-webkit-slider-thumb{background:var(--h2-color-light);border-color:var(--container-bg-light)}body:not(.dark-mode) .api-settings-modal input[type=range]:hover::-moz-range-thumb,body:not(.dark-mode) .api-settings-modal input[type=range]:hover::-webkit-slider-thumb{background:var(--header-color-light)}body.dark-mode .api-settings-modal input[type=range]::-moz-range-thumb,body.dark-mode .api-settings-modal input[type=range]::-webkit-slider-thumb{background:var(--h2-color-dark);border-color:var(--container-bg-dark)}body.dark-mode .api-settings-modal input[type=range]:hover::-moz-range-thumb,body.dark-mode .api-settings-modal input[type=range]:hover::-webkit-slider-thumb{background:var(--header-color-dark)}.token-usage-section{border-radius:8px;margin-top:10px;padding:15px}body:not(.dark-mode) .token-usage-section{background-color:var(--quote-bg-light)}body.dark-mode .token-usage-section{background-color:var(--quote-bg-dark)}#token-usage-display-grid{align-items:center;display:grid;font-size:1em;gap:8px 15px;grid-template-columns:auto 1fr;margin-bottom:15px}#token-usage-display-grid .usage-label{font-weight:700;opacity:.8;text-align:right}#token-usage-display-grid .usage-value{font-family:D2Coding,Consolas,monospace;font-weight:700}body:not(.dark-mode) #token-usage-display-grid .usage-value{color:var(--header-color-light)}body.dark-mode #token-usage-display-grid .usage-value{color:var(--header-color-dark)}#reset-token-usage-btn{background:none;border:1px solid;border-radius:12px;color:inherit;cursor:pointer;font-size:.8em;opacity:.7;padding:4px 10px;transition:opacity .2s}#reset-token-usage-btn:hover{opacity:1}.api-settings-tabs{border-bottom:2px solid;display:flex;margin-bottom:25px}body:not(.dark-mode) .api-settings-tabs{border-color:var(--border-color-light)}body.dark-mode .api-settings-tabs{border-color:var(--border-color-dark)}.api-settings-tab-btn{background:none;border:none;border-bottom:3px solid transparent;color:inherit;cursor:pointer;flex:1;font-family:inherit;font-size:1em;font-weight:700;opacity:.6;padding:12px 10px;transition:all .2s ease}.api-settings-tab-btn:disabled{cursor:not-allowed;opacity:.3}.api-settings-tab-btn:disabled:hover{opacity:.3}.api-settings-tab-btn:not(:disabled):hover{opacity:.8}.api-settings-tab-btn.active{opacity:1}body:not(.dark-mode) .api-settings-tab-btn.active{border-bottom-color:var(--h2-color-light)}body.dark-mode .api-settings-tab-btn.active{border-bottom-color:var(--h2-color-dark)}.api-settings-tab-panels{min-height:350px}.api-settings-tab-panel{display:none}.api-settings-tab-panel.active{display:block}.usage-sub-header{font-size:.9em;margin-top:10px;opacity:.7;padding-top:10px}.usage-sub-header.full-width{border-top:1px solid var(--border-color-dark);grid-column:1/-1}body:not(.dark-mode) .usage-sub-header.full-width{border-top-color:var(--border-color-light)}.usage-label.sub-item{font-size:.9em;font-weight:400;opacity:.8;overflow:hidden;padding-left:15px;text-overflow:ellipsis;white-space:nowrap}.toggle-switch{display:inline-block;flex-shrink:0;height:28px;position:relative;width:50px}.toggle-switch input{height:0;opacity:0;width:0}.slider{border-radius:28px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0;transition:.4s}body:not(.dark-mode) .slider{background-color:#ccc}body.dark-mode .slider{background-color:#555}.slider:before{background-color:#fff;border-radius:50%;bottom:4px;content:"";height:20px;left:4px;position:absolute;transition:.4s;width:20px}input:checked+.slider{background-color:var(--h2-color-dark)}body:not(.dark-mode) input:checked+.slider{background-color:var(--h2-color-light)}input:focus+.slider{box-shadow:0 0 1px #2196f3}input:checked+.slider:before{transform:translateX(22px)}.draggable-panel{border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,.3);display:none;flex-direction:column;overflow:hidden;position:fixed;transition:all .3s ease-in-out;z-index:1100}.draggable-panel.is-dragging{transition:none;z-index:1200}body.dark-mode .draggable-panel{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark)}body:not(.dark-mode) .draggable-panel{background-color:var(--container-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .draggable-panel.panel-focused{border-color:var(--header-color-dark);box-shadow:0 8px 25px hsla(32,46%,69%,.2)}body:not(.dark-mode) .draggable-panel.panel-focused{border-color:var(--header-color-light);box-shadow:0 8px 25px rgba(109,93,75,.2)}.panel-header{align-items:center;cursor:move;display:flex;flex-wrap:nowrap;font-family:"Noto Serif KR",serif;font-weight:700;justify-content:space-between;padding:10px;position:sticky;top:0;transition:background-color .3s,border-color .3s;user-select:none;z-index:1}body.dark-mode .panel-header{background-color:#2a2a2a;border-bottom:1px solid var(--border-color-dark)}body:not(.dark-mode) .panel-header{background-color:#eaddc7;border-bottom:1px solid var(--border-color-light)}.panel-controls{align-items:center;display:flex;gap:8px}.panel-control-btn{background:none;border:none;color:inherit;cursor:pointer;line-height:0;opacity:.7;padding:0;transition:opacity .2s}.panel-control-btn:hover{opacity:1}.panel-control-btn svg{fill:currentColor}.draggable-panel.minimized{height:42px!important;min-height:42px!important;overflow:hidden;resize:none}.draggable-panel.maximized{border-radius:0;height:100%!important;left:0!important;resize:none;top:0!important;width:100%!important}.draggable-panel.maximized .resize-handles{display:none}.panel-maximize-btn .icon-maximize,.panel-maximize-btn.is-maximized .icon-restore{display:block}.draggable-panel.maximized .panel-minimize-btn,.panel-maximize-btn .icon-restore,.panel-maximize-btn.is-maximized .icon-maximize{display:none}.resize-handles .resizer{background:transparent;position:absolute;z-index:5}.resizer.top{cursor:n-resize;height:10px;left:0;top:-5px;width:100%}.resizer.right{cursor:e-resize;height:100%;right:-5px;top:0;width:10px}.resizer.bottom{bottom:-5px;cursor:s-resize;height:10px;left:0;width:100%}.resizer.left{cursor:w-resize;height:100%;left:-5px;top:0;width:10px}.resizer.top-left{cursor:nw-resize;left:-5px}.resizer.top-left,.resizer.top-right{height:15px;top:-5px;width:15px;z-index:6}.resizer.top-right{cursor:ne-resize;right:-5px}.resizer.bottom-left{cursor:sw-resize;left:-5px}.resizer.bottom-left,.resizer.bottom-right{bottom:-5px;height:15px;width:15px;z-index:6}.resizer.bottom-right{cursor:se-resize;right:-5px}body:not(.dark-mode) #settings-button{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) #settings-button:hover{border-color:#a88a68}body:not(.dark-mode) #settings-popover{backdrop-filter:none!important;background-color:var(--container-bg-light)!important}body:not(.dark-mode) #settings-popover .popover-section select{background-color:#fff;border-color:var(--border-color-light)}body:not(.dark-mode) #settings-popover .prompt-popover-group button{background-color:#e0d8ca;border-color:var(--border-color-light)}body:not(.dark-mode) #settings-popover .prompt-popover-group button:hover{background-color:#d1c8bb}body.dark-mode #settings-button{background-color:#3f3f3f!important;border-color:var(--border-color-dark)!important;color:var(--text-color-dark)!important}body.dark-mode #settings-button:hover{background-color:#555!important;border-color:#d4b28c!important}body.dark-mode #settings-popover{backdrop-filter:none!important;background-color:var(--container-bg-dark)!important;border-color:var(--border-color-dark)!important}body.dark-mode #settings-popover .popover-section select{background-color:var(--quote-bg-dark)!important;border-color:var(--border-color-dark)!important;color:var(--text-color-dark)!important}body.dark-mode #settings-popover .prompt-popover-group button{background-color:#3f3f3f!important;border-color:var(--border-color-dark)!important;color:var(--text-color-dark)!important}body.dark-mode #settings-popover .prompt-popover-group button:hover{background-color:#555!important}.visualization-options-modal{display:flex;flex-direction:column;height:auto;max-height:85vh;max-width:800px;text-align:left;width:95%}.visualization-options-modal .modal-scrollable-content{flex-grow:1;margin-right:-15px;overflow-y:auto;padding-right:15px}.visualization-options-modal h3{flex-shrink:0;margin-bottom:25px;text-align:center}.visualization-options-modal .custom-modal-actions{flex-shrink:0;margin-top:15px;padding-top:15px}body:not(.dark-mode) .visualization-options-modal .custom-modal-actions{border-top:1px solid var(--border-color-light)}body.dark-mode .visualization-options-modal .custom-modal-actions{border-top:1px solid var(--border-color-dark)}.viz-main-tabs{border-bottom:2px solid;display:flex;margin-bottom:15px}body:not(.dark-mode) .viz-main-tabs{border-color:var(--border-color-light)}body.dark-mode .viz-main-tabs{border-color:var(--border-color-dark)}.viz-main-tab-btn{background:none;border:none;border-bottom:3px solid transparent;cursor:pointer;flex:1;font-family:inherit;font-size:1.05em;font-weight:700;opacity:.6;padding:12px 10px;transition:all .2s ease}body:not(.dark-mode) .viz-main-tab-btn{color:var(--text-color-light)}body.dark-mode .viz-main-tab-btn{color:var(--text-color-dark)}.viz-main-tab-btn.active{opacity:1}body:not(.dark-mode) .viz-main-tab-btn.active{border-bottom-color:var(--h2-color-light)}body.dark-mode .viz-main-tab-btn.active{border-bottom-color:var(--h2-color-dark)}.viz-main-tab-panels{min-height:400px}.viz-main-tab-panel{display:none}.viz-main-tab-panel.active{display:block}.viz-library-container{display:flex;flex-direction:column;gap:15px}.viz-tabs{border-bottom:2px solid;display:flex;flex-wrap:wrap;gap:8px;padding-bottom:10px}body:not(.dark-mode) .viz-tabs{border-color:var(--border-color-light)}body.dark-mode .viz-tabs{border-color:var(--border-color-dark)}.viz-tab-btn{background:none;border:none;border-radius:6px 6px 0 0;cursor:pointer;font-family:inherit;font-size:.95em;opacity:.7;padding:8px 16px;transition:all .2s ease}body:not(.dark-mode) .viz-tab-btn{color:var(--text-color-light)}body.dark-mode .viz-tab-btn{color:var(--text-color-dark)}.viz-tab-btn.active{font-weight:700;opacity:1}body:not(.dark-mode) .viz-tab-btn.active{background-color:var(--quote-bg-light)}body.dark-mode .viz-tab-btn.active{background-color:var(--quote-bg-dark)}.viz-tab-panel{display:none;padding:15px 5px}.viz-tab-panel.active{display:block}.option-btn-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(130px,1fr))}.option-btn-grid .option-btn{box-sizing:border-box;width:100%}.viz-options-section{margin-bottom:20px}.viz-options-section label{display:block;font-weight:700;margin-bottom:10px}.viz-options-global{border-radius:8px;margin-top:10px;padding:15px}body:not(.dark-mode) .viz-options-global{background-color:var(--quote-bg-light)}body.dark-mode .viz-options-global{background-color:var(--quote-bg-dark)}.option-btn-group{display:flex;flex-wrap:wrap;gap:10px}.option-btn{align-items:center;border:1px solid;border-radius:20px;cursor:pointer;display:inline-flex;font-family:inherit;font-size:.95em;gap:6px;padding:8px 15px;position:relative;transition:all .2s ease}body:not(.dark-mode) .option-btn{background-color:transparent;border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) .option-btn:hover{background-color:var(--quote-bg-light);border-color:#a88a68}body:not(.dark-mode) .option-btn.active{background-color:var(--h2-color-light);border-color:var(--h2-color-light);color:#fff;font-weight:700}body.dark-mode .option-btn{background-color:transparent;border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode .option-btn:hover{background-color:var(--quote-bg-dark);border-color:#d4b28c}body.dark-mode .option-btn.active{background-color:var(--h2-color-dark);border-color:var(--h2-color-dark);color:var(--bg-color-dark);font-weight:700}#viz-options-textarea{border:1px solid;border-radius:6px;box-sizing:border-box;font-family:inherit;font-size:.95em;height:100%;min-height:200px;padding:10px;resize:vertical;width:100%}body:not(.dark-mode) #viz-options-textarea{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #viz-options-textarea{background-color:var(--bg-color-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}#viz-main-tab-details .viz-options-section{display:flex;flex-direction:column;height:100%}#viz-auto-generate-toggle.active,#viz-educational-mode.active,#viz-include-all-dom.active,#viz-simple-mode.active,#viz-simulation-mode.active,#viz-worldsim-mode.active{font-weight:700}body:not(.dark-mode) #viz-auto-generate-toggle.active{background-color:#f0e6ff;border-color:#d1b3ff;color:#6f42c1}body.dark-mode #viz-auto-generate-toggle.active{background-color:#3c2d4a;border-color:#bb86fc;color:#bb86fc}body:not(.dark-mode) #viz-include-all-dom.active,body:not(.dark-mode) #viz-worldsim-mode.active{background-color:#fcf8e3;border-color:#faebcc;color:#8a6d3b}body.dark-mode #viz-include-all-dom.active,body.dark-mode #viz-worldsim-mode.active{background-color:#49402b;border-color:#f0ad4e;color:#f0ad4e}body:not(.dark-mode) #viz-educational-mode.active,body:not(.dark-mode) #viz-simulation-mode.active{background-color:#d9edf7;border-color:#bce8f1;color:#31708f}body.dark-mode #viz-educational-mode.active,body.dark-mode #viz-simulation-mode.active{background-color:#314550;border-color:#5bc0de;color:#5bc0de}body:not(.dark-mode) #viz-simple-mode.active{background-color:#dff0d8;border-color:#d6e9c6;color:#3c763d}body.dark-mode #viz-simple-mode.active{background-color:#334b33;border-color:#98c379;color:#98c379}#viz-theme-options{margin-top:10px}.theme-category{margin-top:15px}.theme-category h4{font-size:.9em;font-weight:700;letter-spacing:.5px;margin:0 0 8px 5px;opacity:.8;text-transform:uppercase}.type-visualization-loading,.type-visualization-placeholder{align-items:center;border-radius:8px;display:flex;flex-direction:column;gap:15px;justify-content:center;margin-bottom:25px;padding:40px 20px}body:not(.dark-mode) .type-visualization-loading,body:not(.dark-mode) .type-visualization-placeholder{background-color:var(--quote-bg-light);border:1px dashed var(--border-color-light)}body.dark-mode .type-visualization-loading,body.dark-mode .type-visualization-placeholder{background-color:var(--quote-bg-dark);border:1px dashed var(--border-color-dark)}.type-visualization-error{border:2px dotted;border-radius:8px;font-family:monospace;margin-bottom:25px;padding:20px;text-align:center}body:not(.dark-mode) .type-visualization-error{background-color:#fff0f0;border-color:#d9534f;color:#721c24}body.dark-mode .type-visualization-error{background-color:#2c1d1f;border-color:#d9534f;color:#d9534f}.type-visualization .visualization-execution-wrapper{position:relative}.type-visualization .viz-controls-group{display:flex;flex-direction:column;gap:8px;opacity:0;pointer-events:none;position:absolute;right:-50px;top:50%;transform:translateY(-50%);transition:opacity .2s ease-in-out;z-index:10}.type-visualization .visualization-execution-wrapper.show-controls .viz-controls-group{opacity:1;pointer-events:auto}.type-visualization .viz-control-btn{align-items:center;border:1px solid;border-radius:50%;cursor:pointer;display:flex;height:36px;justify-content:center;transition:all .2s ease-in-out;width:36px}.type-visualization .viz-control-btn svg{fill:currentColor;height:20px;width:20px}.type-visualization .viz-control-btn:hover{transform:scale(1.1)}body:not(.dark-mode) .type-visualization .viz-control-btn{background-color:var(--container-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) .type-visualization .viz-control-btn:hover{background-color:var(--quote-bg-light);border-color:#a88a68}body.dark-mode .type-visualization .viz-control-btn{background-color:var(--container-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode .type-visualization .viz-control-btn:hover{background-color:var(--quote-bg-dark);border-color:#d4b28c}.viz-control-btn[data-action=pin].pinned{cursor:default}body:not(.dark-mode) .viz-control-btn[data-action=pin].pinned{background-color:#dff0d8;border-color:#d6e9c6;color:#3c763d}body.dark-mode .viz-control-btn[data-action=pin].pinned{background-color:#334b33;border-color:#98c379;color:#98c379}.viz-control-btn[data-action=pin].pinned:hover{transform:none}.viz-control-btn[data-action=theme].active{transform:scale(1.1)}body:not(.dark-mode) .viz-control-btn[data-action=theme].active{background-color:#d9edf7;border-color:#bce8f1;color:#31708f}body.dark-mode .viz-control-btn[data-action=theme].active{background-color:#314550;border-color:#5bc0de;color:#5bc0de}.img-gen-hover-btn,.viz-hover-btn{align-items:center;backdrop-filter:blur(4px);border:1px solid;border-radius:6px;cursor:pointer;display:flex;font-size:16px;height:32px;justify-content:center;opacity:0;pointer-events:none;position:absolute;top:10px;transition:opacity .2s ease-in-out,background-color .2s,transform .2s;width:32px}.content-section:hover .img-gen-hover-btn,.content-section:hover .viz-hover-btn{opacity:.8;pointer-events:auto}.img-gen-hover-btn:hover,.viz-hover-btn:hover{opacity:1;transform:scale(1.1)}.viz-hover-btn{right:50px}.img-gen-hover-btn{right:90px}body:not(.dark-mode) .img-gen-hover-btn,body:not(.dark-mode) .viz-hover-btn{background-color:hsla(43,47%,94%,.8);border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) .img-gen-hover-btn:hover,body:not(.dark-mode) .viz-hover-btn:hover{background-color:var(--quote-bg-light)}body.dark-mode .img-gen-hover-btn,body.dark-mode .viz-hover-btn{background-color:rgba(30,30,30,.8);border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode .img-gen-hover-btn:hover,body.dark-mode .viz-hover-btn:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .placeholder-action-btn.generate-viz{color:#337ab7}body.dark-mode .placeholder-action-btn.generate-viz{color:#5bc0de}.content-section.type-visualization-placeholder{align-items:center;display:flex;flex-direction:column;gap:20px;justify-content:center;margin-bottom:25px;min-height:180px;padding-bottom:25px;padding-top:20px;position:relative;text-align:center}body:not(.dark-mode) .content-section.type-visualization-placeholder{border-color:var(--border-color-light)}body.dark-mode .content-section.type-visualization-placeholder{border-color:var(--border-color-dark)}.viz-group-options{margin-top:20px;padding-top:20px}body:not(.dark-mode) .viz-group-options{border-top:1px solid var(--border-color-light)}body.dark-mode .viz-group-options{border-top:1px solid var(--border-color-dark)}.group-size-controls{align-items:center;display:flex;gap:15px}#viz-group-size-input{border-radius:6px;font-size:1em;font-weight:700;padding:8px 12px;text-align:center;width:80px}body:not(.dark-mode) #viz-group-size-input{background-color:#fff;border:1px solid var(--border-color-light);color:var(--text-color-light)}body.dark-mode #viz-group-size-input{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}.group-size-btn{border-radius:20px;padding:8px 15px}.immersion-mode-modal{max-width:700px}.immersion-modal-desc{margin:-10px 0 25px;opacity:.8;text-align:center}.immersion-tabs{border-bottom:2px solid;display:flex;margin-bottom:20px}body:not(.dark-mode) .immersion-tabs{border-color:var(--border-color-light)}body.dark-mode .immersion-tabs{border-color:var(--border-color-dark)}.immersion-tab-btn{background:none;border:none;border-bottom:3px solid transparent;cursor:pointer;flex:1;font-family:inherit;font-size:1em;font-weight:700;opacity:.6;padding:10px;transition:all .2s ease}body:not(.dark-mode) .immersion-tab-btn{color:var(--text-color-light)}body.dark-mode .immersion-tab-btn{color:var(--text-color-dark)}.immersion-tab-btn.active{opacity:1}body:not(.dark-mode) .immersion-tab-btn.active{border-bottom-color:var(--h2-color-light)}body.dark-mode .immersion-tab-btn.active{border-bottom-color:var(--h2-color-dark)}.immersion-tab-panel{display:none}.immersion-tab-panel.active{display:block}.immersion-mode-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.immersion-option{align-items:center;border:1px solid;border-radius:8px;cursor:pointer;display:flex;padding:12px 15px;position:relative;transition:all .2s ease;user-select:none}.immersion-option input[type=radio]{margin-right:12px}.immersion-option span{font-weight:700}.immersion-option[disabled]{cursor:not-allowed;opacity:.5}.immersion-option[disabled] span:after{content:" (구현 예정)";font-size:.8em;font-weight:400;margin-left:5px;opacity:.8}body:not(.dark-mode) .immersion-option{background-color:transparent;border-color:var(--border-color-light)}body:not(.dark-mode) .immersion-option:hover{background-color:var(--quote-bg-light)}body:not(.dark-mode) .immersion-option:has(input:checked){background-color:var(--strong-bg-light);border-color:var(--h2-border-light);color:var(--h2-color-light)}body.dark-mode .immersion-option{background-color:transparent;border-color:var(--border-color-dark)}body.dark-mode .immersion-option:hover{background-color:var(--quote-bg-dark)}body.dark-mode .immersion-option:has(input:checked){background-color:var(--strong-bg-dark);border-color:var(--h2-border-dark);color:var(--h2-color-dark)}.accordion-header{border-radius:6px}.accordion-header:after{opacity:.7}.accordion-content{transition:max-height .3s ease-out,padding-top .3s ease-out,padding-bottom .3s ease-out}#selection-popover{background-color:#333;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,.3);color:#fff;display:none;gap:5px;padding:5px;position:absolute;z-index:1600}#selection-popover button{align-items:center;background-color:#4a4a4a;border:none;border-radius:5px;color:#fff;cursor:pointer;display:flex;gap:8px;justify-content:center;padding:8px 12px}#selection-popover button:hover{background-color:#5f5f5f}#selection-popover button svg{fill:currentColor}#portal-tooltip{border-radius:6px;font-size:.85em;line-height:1.5;max-width:250px;opacity:0;padding:8px 12px;pointer-events:none;position:fixed;transform:scale(.95) translateY(5px);transition:opacity .2s,transform .2s;visibility:hidden;z-index:9999}#portal-tooltip.visible{opacity:1;transform:scale(1) translateY(0);visibility:visible}body:not(.dark-mode) #portal-tooltip{background-color:#333;color:#fff}body.dark-mode #portal-tooltip{background-color:#f0f0f0;color:#333}.custom-popover{border-radius:8px;box-shadow:0 5px 15px rgba(0,0,0,.2);display:flex;display:none;flex-direction:column;gap:10px;padding:15px;position:fixed;z-index:2100}body:not(.dark-mode) .custom-popover{background-color:var(--container-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .custom-popover{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark)}.custom-popover label{font-size:.9em;font-weight:700}.custom-popover input[type=number]{border:1px solid;border-radius:4px;box-sizing:border-box;padding:8px;width:100%}body:not(.dark-mode) .custom-popover input{background-color:#fff;border-color:var(--border-color-light)}body.dark-mode .custom-popover input{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}.custom-popover .popover-actions{text-align:right}.custom-popover .popover-run-btn{border:none;border-radius:4px;cursor:pointer;font-family:Gowun Batang,serif;padding:6px 12px}body:not(.dark-mode) .custom-popover .popover-run-btn{background-color:var(--h2-color-light);color:#fff}body.dark-mode .custom-popover .popover-run-btn{background-color:var(--h2-color-dark);color:var(--bg-color-dark)}.chat-message.ai h1,.chat-message.ai h2,.chat-message.ai h3,.chat-message.ai h4,.chat-message.ai h5,.chat-message.ai h6{font-family:"Noto Serif KR",serif;margin-bottom:.6em;margin-top:1.2em}.content-section h3 strong{border-radius:6px;display:inline-block;margin-bottom:10px;padding:5px 12px}body.dark-mode .content-section h3 strong{background-color:var(--strong-bg-dark);color:var(--header-color-dark)}body:not(.dark-mode) .content-section h3 strong{background-color:var(--strong-bg-light);color:var(--header-color-light)}.chat-message.ai h1{font-size:1.5em}.chat-message.ai h2{font-size:1.3em}.chat-message.ai h3{font-size:1.2em}.chat-message.ai p{line-height:1.7;margin-bottom:0;margin-top:0}.chat-message.ai p+p{margin-top:.8em}.chat-message.ai ol,.chat-message.ai ul{margin-bottom:1em;margin-top:.8em;padding-left:25px}.chat-message.ai li{margin-bottom:.5em}.chat-message.ai blockquote{border-left:4px solid;border-radius:4px;margin:1em 0;padding:10px 15px}body:not(.dark-mode) .chat-message.ai blockquote{background-color:var(--quote-bg-light);border-color:var(--h2-border-light)}body.dark-mode .chat-message.ai blockquote{background-color:var(--quote-bg-dark);border-color:var(--h2-border-dark)}.chat-message.ai pre{border-radius:8px;font-family:D2Coding,Consolas,monospace;font-size:.95em;margin:1em 0;overflow:auto;padding:15px;white-space:pre-wrap;word-break:break-all}body:not(.dark-mode) .chat-message.ai pre{background-color:#f0f0f0;color:#333}body.dark-mode .chat-message.ai pre{background-color:#0d1117;color:#c9d1d9}.chat-message.ai code:not(pre>code){border-radius:6px;font-family:D2Coding,Consolas,monospace;font-size:85%;margin:0;padding:.2em .4em}body:not(.dark-mode) .chat-message.ai code:not(pre>code){background-color:rgba(0,0,0,.08)}body.dark-mode .chat-message.ai code:not(pre>code){background-color:hsla(0,0%,100%,.1)}.chat-message.ai table{border-collapse:collapse;margin:1em 0;width:100%}.chat-message.ai td,.chat-message.ai th{border:1px solid;padding:8px 12px}body:not(.dark-mode) .chat-message.ai td,body:not(.dark-mode) .chat-message.ai th{border-color:var(--border-color-light)}body.dark-mode .chat-message.ai td,body.dark-mode .chat-message.ai th{border-color:var(--border-color-dark)}body:not(.dark-mode) .chat-message.ai th{background-color:var(--quote-bg-light)}body.dark-mode .chat-message.ai th{background-color:var(--quote-bg-dark)}.katex-display{max-width:100%;overflow-x:auto;overflow-y:hidden;padding:.5em 0}.chat-message.ai details.code-details{border-radius:8px;margin:1em 0;overflow:hidden}body:not(.dark-mode) .chat-message.ai details.code-details{background-color:#f0f0f0;border:1px solid #e0e0e0}body.dark-mode .chat-message.ai details.code-details{background-color:#0d1117;border:1px solid var(--border-color-dark)}.chat-message.ai details.code-details[open] summary.code-summary{border-bottom:1px solid}body:not(.dark-mode) .chat-message.ai details.code-details[open] summary.code-summary{border-bottom-color:#e0e0e0}body.dark-mode .chat-message.ai details.code-details[open] summary.code-summary{border-bottom-color:var(--border-color-dark)}.chat-message.ai summary.code-summary{align-items:center;cursor:pointer;display:flex;font-family:D2Coding,Consolas,monospace;font-weight:700;outline:none;padding:10px 15px;transition:background-color .2s}body:not(.dark-mode) .chat-message.ai summary.code-summary{color:#555}body.dark-mode .chat-message.ai summary.code-summary{color:#999}body:not(.dark-mode) .chat-message.ai summary.code-summary:hover{background-color:#e9e9e9}body.dark-mode .chat-message.ai summary.code-summary:hover{background-color:#1f2328}.chat-message.ai summary.code-summary::-webkit-details-marker{display:none}.chat-message.ai summary.code-summary:before{content:"▶";font-size:.8em;margin-right:10px;transform:rotate(0deg);transition:transform .2s}.chat-message.ai details[open]>summary.code-summary:before{transform:rotate(90deg)}.chat-message.ai details.code-details>pre{background-color:transparent!important;border:none;border-radius:0;margin:0}@keyframes toast-in{0%{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateX(0)}}@keyframes toast-out{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(120%)}}.toast-notification{align-items:center;animation:toast-in .4s cubic-bezier(.215,.61,.355,1) forwards;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.15);cursor:pointer;display:flex;gap:15px;max-width:350px;min-width:250px;padding:15px 20px;position:fixed;right:20px;top:20px;z-index:9999}.toast-notification.exiting{animation:toast-out .4s ease-out forwards}body.dark-mode .toast-notification{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) .toast-notification{background-color:var(--container-bg-light);border:1px solid var(--border-color-light);color:var(--text-color-light)}.toast-icon{font-size:1.5em;line-height:0}.toast-content p{font-size:.95em;font-weight:700;margin:0}.toast-content small{display:block;font-size:.85em;margin-top:4px;opacity:.7;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@keyframes toast-in-bottom{0%{opacity:0;transform:translate(-50%,100px)}to{opacity:1;transform:translate(-50%)}}@keyframes toast-out-bottom{0%{opacity:1;transform:translate(-50%)}to{opacity:0;transform:translate(-50%,120px)}}@keyframes spin{to{transform:rotate(1turn)}}.progress-toast-notification{align-items:center;animation:toast-in-bottom .4s cubic-bezier(.215,.61,.355,1) forwards;border-radius:8px;bottom:20px;box-shadow:0 8px 24px rgba(0,0,0,.15);display:none;gap:15px;left:50%;max-width:450px;min-width:250px;padding:15px 20px;position:fixed;transform:translateX(-50%);z-index:9999}.progress-toast-notification.exiting{animation:toast-out-bottom .4s ease-out forwards}body.dark-mode .progress-toast-notification{background-color:#3a3a3a;border:1px solid var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) .progress-toast-notification{background-color:#f1f1f1;border:1px solid var(--border-color-light);color:var(--text-color-light)}.progress-toast-notification .spinner{animation:spin 1s linear infinite;border:3px solid hsla(0,0%,50%,.3);border-radius:50%;border-top-color:currentcolor;height:20px;width:20px}.toast-success-icon{height:24px;width:24px}body:not(.dark-mode) .toast-success-icon{color:var(--correct-color)}body.dark-mode .toast-success-icon{color:var(--correct-color-dark)}.progress-toast-notification .toast-content p{font-weight:700;margin:0}.progress-toast-notification .toast-content small{display:block;font-size:.9em;margin-top:4px;opacity:.8}.custom-context-menu{border-radius:8px;box-shadow:0 5px 20px rgba(0,0,0,.25);font-family:Gowun Batang,serif;font-size:.95em;min-width:200px;padding:5px;position:fixed}body:not(.dark-mode) .custom-context-menu{background-color:var(--container-bg-light);border:1px solid var(--border-color-light);color:var(--text-color-light)}body.dark-mode .custom-context-menu{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}.custom-context-menu .context-menu-item{align-items:center;background:none;border:none;border-radius:6px;color:inherit;cursor:pointer;display:flex;font-family:inherit;font-size:inherit;justify-content:space-between;padding:9px 12px;text-align:left;white-space:nowrap;width:100%}body:not(.dark-mode) .custom-context-menu .context-menu-item:not([disabled]):hover{background-color:var(--quote-bg-light)}body.dark-mode .custom-context-menu .context-menu-item:not([disabled]):hover{background-color:var(--quote-bg-dark)}.custom-context-menu .context-menu-item[disabled]{cursor:not-allowed;opacity:.5}.custom-context-menu .context-menu-separator{height:1px;margin:5px 8px}body:not(.dark-mode) .custom-context-menu .context-menu-separator{background-color:var(--border-color-light)}body.dark-mode .custom-context-menu .context-menu-separator{background-color:var(--border-color-dark)}.custom-context-menu .submenu-container{position:relative}.custom-context-menu .submenu-arrow{font-size:.8em;margin-left:15px}.custom-context-menu .context-submenu{border-radius:8px;box-shadow:inherit;display:none;left:100%;min-width:150px;padding:5px;position:absolute;top:-6px}body:not(.dark-mode) .custom-context-menu .context-submenu{background-color:inherit;border:1px solid var(--border-color-light)}body.dark-mode .custom-context-menu .context-submenu{background-color:inherit;border:1px solid var(--border-color-dark)}.custom-context-menu .submenu-container:hover>.context-submenu{display:block}#copy-modal-container{max-width:600px;padding:20px;width:90%}#copy-modal-container p{font-size:1.1em;margin-bottom:15px;margin-top:0}#copy-modal-textarea{border-radius:6px;font-family:D2Coding,Consolas,monospace;font-size:.9em;height:300px;padding:10px;resize:none;width:100%}body:not(.dark-mode) #copy-modal-textarea{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #copy-modal-textarea{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}#quiz-modal-overlay{background:rgba(0,0,0,.7)}.quiz-modal{max-width:600px;width:90%}body:not(.dark-mode) .quiz-modal{background-color:var(--bg-color-light)}body.dark-mode .quiz-modal{background-color:var(--container-bg-dark)}#quiz-container{margin-bottom:20px}.quiz-question-block{border-left:3px solid var(--h2-border-light);margin-bottom:25px;padding-left:15px}body.dark-mode .quiz-question-block{border-left-color:var(--h2-border-dark)}.quiz-question-block p{font-size:1.1em;font-weight:700}.quiz-options label{border:1px solid transparent;border-radius:5px;cursor:pointer;display:block;margin:8px 0;padding:10px;transition:all .2s}body:not(.dark-mode) .quiz-options label:hover{background-color:var(--quote-bg-light)}body.dark-mode .quiz-options label:hover{background-color:var(--quote-bg-dark)}.quiz-options input[type=radio]{margin-right:10px}#quiz-submit-btn{background-color:var(--h2-color-dark);border:none;border-radius:5px;color:#fff;cursor:pointer;font-weight:700;padding:10px 25px}body:not(.dark-mode) #quiz-submit-btn{background-color:var(--h2-color-light)}#quiz-results{font-size:1.2em;font-weight:700;margin-top:20px}#prompt-modal-overlay textarea{background:var(--bg-color-dark);border:1px solid var(--border-color-dark);border-radius:5px;color:var(--text-color-dark);height:150px;margin-top:15px;padding:10px;width:100%}body:not(.dark-mode) #prompt-modal-overlay textarea{background:var(--bg-color-light);border-color:var(--border-color-light);color:var(--text-color-light)}.choice-modal-buttons{flex-wrap:wrap;gap:10px}.choice-modal-buttons .modal-btn:not(.cancel){align-items:center;display:flex;flex-direction:column;gap:4px;justify-content:center;line-height:1.2;min-height:85px;min-width:110px;padding:10px 8px;text-align:center}.choice-modal-buttons .modal-btn:not(.cancel) svg{height:24px;margin-bottom:4px;width:24px}.modal-btn-description{font-size:.8em!important;font-weight:400!important;margin-top:4px;opacity:.7}#snapshot-modal-overlay .custom-modal{padding:30px}.move-to-folder-modal{max-width:450px;text-align:left;width:90%}.move-to-folder-modal h3{margin-bottom:20px;margin-top:0;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap}#move-to-folder-search-input,#snapshot-folder-search-input{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);border-radius:6px;box-sizing:border-box;color:var(--text-color-dark);font-family:Gowun Batang,serif;font-size:1em;margin-bottom:15px;padding:10px 15px;width:100%}body:not(.dark-mode) #move-to-folder-search-input,body:not(.dark-mode) #snapshot-folder-search-input{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}#move-to-folder-list-container,#snapshot-folder-list-container{margin-bottom:20px;max-height:40vh;overflow-y:auto;padding-right:5px}#snapshot-folder-list-container{max-height:30vh}.move-folder-item,.snapshot-folder-item{align-items:center;border-radius:6px;cursor:pointer;display:flex;font-weight:700;gap:10px;padding:12px 10px;transition:background-color .2s}.snapshot-folder-item{border:2px solid transparent;padding:10px}.move-folder-item svg,.snapshot-folder-item svg{fill:currentColor;flex-shrink:0}.move-folder-item[disabled]{background-color:transparent!important;cursor:not-allowed;opacity:.5}body:not(.dark-mode) .move-folder-item:not([disabled]):hover,body:not(.dark-mode) .snapshot-folder-item:hover{background-color:var(--quote-bg-light)}body.dark-mode .move-folder-item:not([disabled]):hover,body.dark-mode .snapshot-folder-item:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .snapshot-folder-item.selected{background-color:var(--strong-bg-light);border-color:var(--header-color-light)}body.dark-mode .snapshot-folder-item.selected{background-color:var(--strong-bg-dark);border-color:var(--header-color-dark)}.chunk-size-modal{text-align:left}.chunk-size-modal h3{margin-bottom:20px;text-align:center}#chunk-size-input{width:100%}.manual-refinement-modal{max-width:500px;text-align:left}.manual-refinement-modal h3{margin-bottom:10px;text-align:center}.manual-refinement-modal p{font-size:.9em;margin-bottom:20px;opacity:.8;text-align:center}#manual-refinement-note-list{border:1px solid var(--border-color-dark);border-radius:8px;margin-bottom:20px;max-height:50vh;overflow-y:auto;padding:10px}body:not(.dark-mode) #manual-refinement-note-list{background-color:var(--quote-bg-light);border-color:var(--border-color-light)}body.dark-mode #manual-refinement-note-list{background-color:var(--quote-bg-dark)}.manual-refinement-note-item{border:2px solid transparent;border-radius:6px;cursor:pointer;margin-bottom:5px;padding:10px 12px;transition:background-color .2s}.manual-refinement-note-item:last-child{margin-bottom:0}.manual-refinement-note-item .title{font-weight:700}.manual-refinement-note-item .date{font-size:.8em;margin-top:4px;opacity:.7}body:not(.dark-mode) .manual-refinement-note-item:hover{background-color:#e6e0d4}body.dark-mode .manual-refinement-note-item:hover{background-color:#444}body:not(.dark-mode) .manual-refinement-note-item.selected{background-color:var(--strong-bg-light);border-color:var(--h2-border-light)}body.dark-mode .manual-refinement-note-item.selected{background-color:var(--strong-bg-dark);border-color:var(--h2-border-dark)}#doc-translator-modal-overlay .custom-modal,#translation-language-modal-overlay .custom-modal{padding:25px 30px}#doc-translator-modal-overlay h3,#translation-language-modal-overlay h3{align-items:center;display:flex;gap:10px;justify-content:center;margin-bottom:25px}.settings-card{border-radius:8px;margin-bottom:20px;padding:15px}body:not(.dark-mode) .settings-card{background-color:var(--quote-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .settings-card{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark)}.language-option-item{align-items:center;border-radius:6px;display:flex;gap:12px;padding:10px;transition:background-color .2s}.language-option-item:not(:last-child){margin-bottom:8px}body:not(.dark-mode) .language-option-item:hover{background-color:#e6e0d4}body.dark-mode .language-option-item:hover{background-color:#444}.language-option-label-part{align-items:center;cursor:pointer;display:flex;flex-shrink:0;gap:12px}.language-option-control-part{flex-grow:1}.language-option-item input[type=radio]{display:none}.custom-radio{align-items:center;border:2px solid;border-radius:50%;display:flex;flex-shrink:0;height:18px;justify-content:center;transition:all .2s;width:18px}body:not(.dark-mode) .custom-radio{border-color:var(--sub-text-color-light)}body.dark-mode .custom-radio{border-color:var(--sub-text-color-dark)}.custom-radio:after{background-color:transparent;border-radius:50%;content:"";height:10px;transition:background-color .2s;width:10px}.language-option-item input[type=radio]:checked+.custom-radio{border-width:2px}body:not(.dark-mode) .language-option-item input[type=radio]:checked+.custom-radio{border-color:var(--h2-color-light)}body.dark-mode .language-option-item input[type=radio]:checked+.custom-radio{border-color:var(--h2-color-dark)}body:not(.dark-mode) .language-option-item input[type=radio]:checked+.custom-radio:after{background-color:var(--h2-color-light)}body.dark-mode .language-option-item input[type=radio]:checked+.custom-radio:after{background-color:var(--h2-color-dark)}.language-option-item .option-label{flex-shrink:0;font-weight:700}.language-option-item .custom-select-container,.language-option-item input[type=text]{flex-grow:1}.language-option-item .custom-select-container[disabled],.language-option-item [disabled]{opacity:.5;pointer-events:none}body:not(.dark-mode) .language-option-item [disabled]{background-color:#eee}body.dark-mode .language-option-item [disabled]{background-color:#555}.chunk-size-container{align-items:flex-end;display:flex;gap:20px}.chunk-size-input-group{flex-grow:1}.chunk-size-input-group small{display:block;font-size:.8em;margin-top:5px;opacity:.7}.turn-count-display{flex-shrink:0;padding-bottom:5px;text-align:right}.turn-count-label{display:block;font-size:.9em;opacity:.8}#doc-translator-turn-count{display:block;font-size:1.8em;font-weight:700;line-height:1}body:not(.dark-mode) #doc-translator-turn-count{color:var(--header-color-light)}body.dark-mode #doc-translator-turn-count{color:var(--header-color-dark)}#doc-translator-modal-overlay input[type=number],#doc-translator-modal-overlay input[type=text],#doc-translator-modal-overlay textarea,#translation-language-modal-overlay input[type=text]{border:1px solid;border-radius:6px;box-sizing:border-box;font-family:Gowun Batang,serif;font-size:1em;padding:10px 12px;transition:border-color .2s,box-shadow .2s;width:100%}#doc-translator-modal-overlay input:focus,#doc-translator-modal-overlay textarea:focus,#translation-language-modal-overlay input:focus{outline:none}body:not(.dark-mode) #doc-translator-modal-overlay input,body:not(.dark-mode) #doc-translator-modal-overlay textarea,body:not(.dark-mode) #translation-language-modal-overlay input{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) #doc-translator-modal-overlay input:focus,body:not(.dark-mode) #doc-translator-modal-overlay textarea:focus,body:not(.dark-mode) #translation-language-modal-overlay input:focus{border-color:var(--header-color-light);box-shadow:0 0 0 2px rgba(109,93,75,.2)}body.dark-mode #doc-translator-modal-overlay input,body.dark-mode #doc-translator-modal-overlay textarea,body.dark-mode #translation-language-modal-overlay input{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode #doc-translator-modal-overlay input:focus,body.dark-mode #doc-translator-modal-overlay textarea:focus,body.dark-mode #translation-language-modal-overlay input:focus{border-color:var(--header-color-dark);box-shadow:0 0 0 2px hsla(32,46%,69%,.2)}.custom-select-container{font-family:Gowun Batang,serif;position:relative;width:100%}.custom-select-trigger{border:1px solid;border-radius:6px;box-sizing:border-box;cursor:pointer;font-size:1em;overflow:hidden;padding:10px 40px 10px 12px;position:relative;text-overflow:ellipsis;transition:border-color .2s,box-shadow .2s;user-select:none;white-space:nowrap;width:100%}.custom-select-trigger:after{background-position:50%;background-repeat:no-repeat;background-size:contain;content:"";height:1.2em;position:absolute;right:12px;top:50%;transform:translateY(-50%) rotate(0deg);transition:transform .3s ease;width:1.2em}.custom-select-container.open .custom-select-trigger:after{transform:translateY(-50%) rotate(180deg)}.custom-select-options{border-radius:6px;left:0;max-height:200px;opacity:0;overflow-y:auto;padding:5px;position:absolute;right:0;top:calc(100% + 5px);transform:translateY(-10px);transition:opacity .3s ease,transform .3s ease,visibility .3s;visibility:hidden;z-index:2050}.custom-select-container.open .custom-select-options{opacity:1;transform:translateY(0);visibility:visible}.custom-select-option{border-radius:4px;cursor:pointer;padding:10px 12px;transition:background-color .2s}body:not(.dark-mode) .custom-select-trigger{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) .custom-select-container.open .custom-select-trigger{border-color:var(--header-color-light);box-shadow:0 0 0 2px rgba(109,93,75,.2)}body:not(.dark-mode) .custom-select-trigger:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%234b4237' viewBox='0 0 24 24'%3E%3Cpath d='M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6z'/%3E%3C/svg%3E")}body:not(.dark-mode) .custom-select-options{background-color:#fff;border:1px solid var(--border-color-light);box-shadow:0 4px 12px rgba(0,0,0,.1)}body:not(.dark-mode) .custom-select-option.selected,body:not(.dark-mode) .custom-select-option:hover{background-color:var(--quote-bg-light)}body.dark-mode .custom-select-trigger{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode .custom-select-container.open .custom-select-trigger{border-color:var(--header-color-dark);box-shadow:0 0 0 2px hsla(32,46%,69%,.2)}body.dark-mode .custom-select-trigger:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23e0e0e0' viewBox='0 0 24 24'%3E%3Cpath d='M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6z'/%3E%3C/svg%3E")}body.dark-mode .custom-select-options{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);box-shadow:0 4px 12px rgba(0,0,0,.3)}body.dark-mode .custom-select-option.selected,body.dark-mode .custom-select-option:hover{background-color:var(--quote-bg-dark)}.language-option-item select{display:none}.message-toolbar{border-radius:8px;display:flex;flex-direction:column;gap:6px;opacity:0;padding:6px;pointer-events:none;position:absolute;top:4px;transform:scale(.95);transition:opacity .2s ease-in-out,transform .2s ease-in-out;z-index:10}body:not(.dark-mode) .message-toolbar{backdrop-filter:blur(4px);background-color:hsla(43,47%,94%,.8);border:1px solid var(--border-color-light)}body.dark-mode .message-toolbar{backdrop-filter:blur(4px);background-color:rgba(30,30,30,.8);border:1px solid var(--border-color-dark)}.message-toolbar.user-toolbar{left:-52px}.message-toolbar.ai-toolbar{right:-52px}.toolbar-button{align-items:center;border:none;border-radius:6px;cursor:pointer;display:flex;height:36px;justify-content:center;transition:background-color .2s,transform .1s;width:36px}body:not(.dark-mode) .toolbar-button{background-color:var(--quote-bg-light);color:var(--text-color-light)}body.dark-mode .toolbar-button{background-color:var(--quote-bg-dark);color:var(--text-color-dark)}body:not(.dark-mode) .toolbar-button:hover{background-color:#e6e0d4}body.dark-mode .toolbar-button:hover{background-color:#444}.toolbar-button:active{transform:scale(.9)}.toolbar-button svg{fill:currentColor;height:20px;width:20px}.ai-response-container.toolbar-active,.chat-message.user.toolbar-active{position:relative}.ai-response-container.toolbar-active .message-toolbar,.chat-message.user.toolbar-active .message-toolbar{opacity:1;pointer-events:auto;transform:scale(1)}#header-visibility-toggle{align-items:center;border-radius:50%;bottom:20px;cursor:pointer;display:flex;height:40px;justify-content:center;left:20px;opacity:.5;position:fixed;transition:opacity .3s,background-color .3s;width:40px;z-index:1500}#header-visibility-toggle:hover{opacity:1}#header-visibility-toggle svg{fill:currentColor;height:22px;width:22px}body:not(.dark-mode) #header-visibility-toggle{background-color:var(--container-bg-light);border:1px solid var(--border-color-light);color:var(--text-color-light)}body.dark-mode #header-visibility-toggle{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}#header-visibility-toggle .icon-hide{display:block}#header-visibility-toggle .icon-show,body.header-force-hidden #header-visibility-toggle .icon-hide{display:none}body.header-force-hidden #header-visibility-toggle .icon-show{display:block}body.header-force-hidden{padding-top:0!important}body.header-force-hidden #immersive-header{transform:translateY(-120%)!important}.canvas-container{height:100%;left:0;pointer-events:none;position:fixed!important;top:0;width:100%;z-index:1000}body.drawing-mode-active{cursor:crosshair}#drawing-toolbar{align-items:center;border-radius:12px;bottom:30px;box-shadow:0 4px 15px rgba(0,0,0,.2);display:none;gap:8px;padding:8px 12px;position:fixed;right:50%;transform:translateX(50%);transition:transform .3s ease-in-out,background-color .3s,border-color .3s;z-index:1001}#drawing-toolbar:hover{transform:translateX(50%) translateY(-5px)}body:not(.dark-mode) #drawing-toolbar{background-color:var(--container-bg-light);border:1px solid var(--border-color-light)}body.dark-mode #drawing-toolbar{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark)}.toolbar-btn{align-items:center;background-color:transparent;border:none;border-radius:8px;cursor:pointer;display:flex;justify-content:center;padding:6px;transition:background-color .2s,color .2s}body:not(.dark-mode) .toolbar-btn{color:var(--sub-text-color-light)}body:not(.dark-mode) .toolbar-btn:hover{background-color:var(--quote-bg-light);color:var(--text-color-light)}body:not(.dark-mode) .toolbar-btn.active{background-color:var(--h2-color-light);color:#fff}body.dark-mode .toolbar-btn{color:var(--sub-text-color-dark)}body.dark-mode .toolbar-btn:hover{background-color:var(--quote-bg-dark);color:var(--text-color-dark)}body.dark-mode .toolbar-btn.active{background-color:var(--h2-color-dark);color:var(--bg-color-dark)}.toolbar-btn svg{fill:currentColor;height:22px;width:22px}.toolbar-separator{height:24px;margin:0 4px;width:1px}body:not(.dark-mode) .toolbar-separator{background-color:var(--border-color-light)}body.dark-mode .toolbar-separator{background-color:var(--border-color-dark)}.toolbar-color-picker{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;cursor:pointer;height:28px;padding:0;width:28px}body:not(.dark-mode) .toolbar-color-picker::-webkit-color-swatch{border:2px solid var(--border-color-light);border-radius:50%}body:not(.dark-mode) .toolbar-color-picker::-moz-color-swatch{border:2px solid var(--border-color-light);border-radius:50%}body.dark-mode .toolbar-color-picker::-webkit-color-swatch{border:2px solid var(--border-color-dark);border-radius:50%}body.dark-mode .toolbar-color-picker::-moz-color-swatch{border:2px solid var(--border-color-dark);border-radius:50%}.toolbar-slider-container{align-items:center;display:flex;gap:8px}#drawing-width-slider{cursor:pointer;width:100px}#drawing-width-value{font-size:12px;min-width:20px;text-align:center}body:not(.dark-mode) #drawing-width-value{color:var(--sub-text-color-light)}body.dark-mode #drawing-width-value{color:var(--sub-text-color-dark)}#system-info-widget{text-align:left}#real-time-clock{font-size:.9em;font-weight:700}#canvas-id-container{align-items:center;display:flex;font-size:.75em;gap:12px;margin-top:2px;opacity:.7}#copy-canvas-id{align-items:center;cursor:pointer;display:inline-flex;justify-content:center;transition:transform .2s}#copy-canvas-id svg{fill:currentColor}#copy-canvas-id:hover{transform:scale(1.2)}.developer-info-widget{align-items:center;display:flex;gap:10px;padding-left:12px}body:not(.dark-mode) .developer-info-widget{border-left:1px solid var(--border-color-light)}body.dark-mode .developer-info-widget{border-left:1px solid var(--border-color-dark)}.dev-info-link{align-items:center;display:inline-flex;justify-content:center;opacity:.6;transition:opacity .2s ease-in-out,transform .2s ease-in-out}body:not(.dark-mode) .dev-info-link{color:var(--text-color-light)}body.dark-mode .dev-info-link{color:var(--text-color-dark)}.dev-info-link:hover{opacity:1;transform:scale(1.1)}.dev-info-link svg{fill:currentColor}#quick-query-container{align-items:center;display:flex;max-width:600px;transition:all .3s ease;width:100%}#quick-query-temp-toggle{align-items:center;background:none;border:1px solid;border-radius:18px 0 0 18px;border-right:none;cursor:pointer;display:flex;flex-shrink:0;height:36px;justify-content:center;opacity:.6;padding:0 8px;transition:all .3s;width:40px}#quick-query-temp-toggle.active{opacity:1}#quick-query-temp-toggle svg{fill:currentColor}body.dark-mode #quick-query-temp-toggle{border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #quick-query-temp-toggle{border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #quick-query-temp-toggle.active{background-color:var(--h2-border-dark)}body:not(.dark-mode) #quick-query-temp-toggle.active{background-color:var(--h2-border-light)}#quick-query-input{border:1px solid;border-left:none;border-right:none;box-sizing:border-box;flex-grow:1;font-family:Gowun Batang,serif;font-size:.95em;height:36px;max-height:36px;outline:none;overflow-y:auto;padding:6px 15px;resize:none}#quick-query-send-btn{align-items:center;border:1px solid;border-left:none;box-sizing:border-box;cursor:pointer;display:flex;flex-shrink:0;height:36px;justify-content:center;padding:0 12px;transition:all .3s;width:44px}#quick-query-input,#quick-query-send-btn{border-radius:0}#quick-query-send-btn{border-radius:0 18px 18px 0}#quick-query-send-btn svg{fill:currentColor}body.dark-mode #quick-query-input{background-color:rgba(42,42,42,.8);border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #quick-query-input{background-color:hsla(0,0%,100%,.8);border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #quick-query-send-btn{border-color:var(--border-color-dark);color:var(--header-color-dark)}body:not(.dark-mode) #quick-query-send-btn{border-color:var(--border-color-light);color:var(--header-color-light)}body.dark-mode #quick-query-input:focus,body.dark-mode #quick-query-send-btn:hover,body.dark-mode #quick-query-temp-toggle:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) #quick-query-input:focus,body:not(.dark-mode) #quick-query-send-btn:hover,body:not(.dark-mode) #quick-query-temp-toggle:hover{background-color:#fff}.fixed-tool-container{align-items:center;display:flex;gap:10px;position:relative}.tool-button{align-items:center;border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;transition:all .3s;user-select:none;width:40px}.tool-button svg{fill:currentColor;transition:transform .2s}.tool-button:hover svg{transform:scale(1.1)}body.dark-mode .tool-button:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .tool-button:hover{background-color:var(--quote-bg-light)}.tool-button.active{background-color:var(--strong-bg-dark)}body:not(.dark-mode) .tool-button.active{background-color:var(--strong-bg-light)}body.dark-mode .tool-button.active{color:var(--header-color-dark)}body:not(.dark-mode) .tool-button.active{color:var(--header-color-light)}.loader-text{font-size:.9em;font-weight:700;left:50%;opacity:0;position:absolute;top:50%;transform:translate(-50%,-50%);transition:opacity .3s ease-in-out;z-index:2}.controls-disabled,.loader-text{pointer-events:none}.controls-disabled .tool-button{opacity:.3}.controls-disabled .loader-text{opacity:1}body:not(.dark-mode) .loader-text{color:var(--text-color-light)}body.dark-mode .loader-text{color:var(--text-color-dark)}.content-section.type-interactive-map{margin-bottom:25px}.map-accordion-container{border-radius:8px;overflow:hidden;transition:box-shadow .3s ease-in-out}body:not(.dark-mode) .map-accordion-container{background-color:var(--container-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .map-accordion-container{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark)}.map-accordion-header{align-items:center;cursor:pointer;display:flex;justify-content:space-between;padding:12px 15px;transition:background-color .2s;user-select:none}body:not(.dark-mode) .map-accordion-header:hover{background-color:var(--quote-bg-light)}body.dark-mode .map-accordion-header:hover{background-color:var(--quote-bg-dark)}.map-location-name{font-size:1.05em;font-weight:700}body:not(.dark-mode) .map-location-name{color:var(--header-color-light)}body.dark-mode .map-location-name{color:var(--header-color-dark)}.map-toggle-icon{font-size:1.2em;font-weight:700;transform-origin:center;transition:transform .3s ease}.map-accordion-container.expanded .map-toggle-icon{transform:rotate(90deg)}.map-accordion-content{max-height:0;overflow:hidden;transition:max-height .4s ease-in-out}.map-accordion-container.expanded .map-accordion-content{max-height:450px}body.dark-mode .leaflet-container{background-color:#333}body:not(.dark-mode) .leaflet-popup-content-wrapper,body:not(.dark-mode) .leaflet-popup-tip{background:var(--container-bg-light);color:var(--text-color-light)}body.dark-mode .leaflet-popup-content-wrapper,body.dark-mode .leaflet-popup-tip{background:var(--container-bg-dark);color:var(--text-color-dark)}.leaflet-popup-content{line-height:1.4;margin:13px 19px;text-align:center}.map-popup-content b{display:block;font-size:1.1em;margin-bottom:8px}.google-earth-link{align-items:center;border-radius:15px;display:inline-flex;font-size:.85em;font-weight:700;gap:6px;padding:5px 10px;text-decoration:none;transition:background-color .2s}body:not(.dark-mode) .google-earth-link{background-color:var(--quote-bg-light);border:1px solid var(--border-color-light);color:var(--header-color-light)}body:not(.dark-mode) .google-earth-link:hover{background-color:#e6e0d4}body.dark-mode .google-earth-link{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);color:var(--header-color-dark)}body.dark-mode .google-earth-link:hover{background-color:#444}.terminal-mode{background-color:#000!important}.terminal-mode #ai-content-placeholder,.terminal-mode #immersive-header,.terminal-mode .draggable-panel{background-color:#000!important;border-color:#0f0!important;color:#0f0!important;font-family:D2Coding,Consolas,monospace!important}.terminal-mode .content-section h2,.terminal-mode .header h1,.terminal-mode .status-dashboard .status-module h4,.terminal-mode a{border-color:#0f0!important;color:#0f0!important}.terminal-mode .status-dashboard{background-color:#111!important}.terminal-mode .status-dashboard .status-module{background-color:#000!important}.terminal-mode ::-webkit-scrollbar-thumb{background-color:#0f0!important}.focus-mode:after{box-shadow:inset 0 0 15vw 5vw rgba(0,0,0,.7);content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;transition:box-shadow .5s ease-in-out;width:100%;z-index:2500}@keyframes screen-shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-1px,1px)}20%,40%,60%,80%{transform:translate(1px,-1px)}}.unstable-mode #ai-content-placeholder{animation:screen-shake .3s infinite}.blueprint-mode{background-color:#002b5c!important}.blueprint-mode #ai-content-placeholder,.blueprint-mode #immersive-header,.blueprint-mode .draggable-panel{background-color:#002b5c!important;border-color:#3e7fbc!important;color:#fff!important;font-family:D2Coding,Consolas,monospace!important}.blueprint-mode .content-section h2,.blueprint-mode .header h1,.blueprint-mode .status-dashboard .status-module h4,.blueprint-mode a{border-color:#ffc600!important;color:#ffc600!important}.blueprint-mode .status-dashboard,.blueprint-mode blockquote{background-color:rgba(0,26,54,.8)!important}.blueprint-mode ::-webkit-scrollbar-thumb{background-color:#ffc600!important}@keyframes glitch-text-shadow{0%,to{text-shadow:-1.5px -1.5px 0 #f0f,1.5px 1.5px 0 #0ff}25%{text-shadow:1.5px 1.5px 0 #f0f,-1.5px -1.5px 0 #0ff}50%{text-shadow:1.5px -1.5px 0 #f0f,-1.5px 1.5px 0 #0ff}75%{text-shadow:-1.5px 1.5px 0 #f0f,1.5px -1.5px 0 #0ff}}.glitch-mode{animation:glitch-text-shadow .1s infinite alternate}@keyframes underwater-sway{0%,to{transform:skewX(-1deg) skewY(-.5deg)}50%{transform:skewX(1deg) skewY(.5deg)}}.submerged-mode:before{background-color:rgba(0,100,150,.2);content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2400}.submerged-mode #ai-content-placeholder{animation:underwater-sway 10s ease-in-out infinite}.night-vision-mode:before{background:repeating-linear-gradient(transparent,transparent 2px,rgba(0,255,0,.08) 3px,rgba(0,255,0,.08) 4px);content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2500}.night-vision-mode #ai-content-placeholder,.night-vision-mode #immersive-header,.night-vision-mode .draggable-panel{background-color:#051005!important;border-color:#0f0!important;color:#0f0!important;filter:brightness(1.1) contrast(1.1)}.night-vision-mode .content-section h2,.night-vision-mode .header h1,.night-vision-mode a{border-color:#0f0!important;color:#0f0!important}.night-vision-mode .status-dashboard{background-color:#0a1f0a!important}.night-vision-mode .status-dashboard .status-module{background-color:#051005!important}.night-vision-mode .status-dashboard .status-module h4{border-color:#0f0!important;color:#0f0!important}.night-vision-mode ::-webkit-scrollbar-thumb{background-color:#0f0!important}@keyframes blur-pulse{0%,to{filter:blur(.5px)}50%{filter:blur(1.5px)}}.dreamlike-mode #ai-content-placeholder{animation:blur-pulse 8s ease-in-out infinite}.dreamlike-mode:after{box-shadow:inset 0 0 10vw 8vw rgba(75,0,130,.2);content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2500}@keyframes panic-shake{0%,to{transform:translate(0)}10%,90%{transform:translate(-2px,2px)}20%,80%{transform:translate(2px,-2px)}30%,70%{transform:translate(2px,2px)}40%,60%{transform:translate(-2px,-2px)}50%{transform:translate(0)}}@keyframes panic-vignette{0%,to{box-shadow:inset 0 0 0 0 rgba(200,0,0,0)}50%{box-shadow:inset 0 0 5vw 2vw rgba(200,0,0,.4)}}.panic-mode #ai-content-placeholder{animation:panic-shake .1s infinite}.panic-mode:after{animation:panic-vignette .5s infinite;content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2500}@keyframes tipsy-sway{0%{transform:rotate(-.5deg) translateX(-.5%)}50%{transform:rotate(.5deg) translateX(.5%)}to{transform:rotate(-.5deg) translateX(-.5%)}}.tipsy-mode #ai-content-placeholder{animation:tipsy-sway 6s ease-in-out infinite;filter:blur(.3px);transform-origin:center center}@keyframes fever-tremble{0%,to{transform:translate(0)}50%{transform:translate(.5px,.5px)}}.fever-mode #ai-content-placeholder{animation:fever-tremble .2s infinite;filter:blur(.5px)}.fever-mode:after{box-shadow:inset 0 0 20vw 10vw rgba(0,0,0,.2);content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2500}.cctv-mode #ai-content-placeholder{border-radius:20px;filter:grayscale(.5) contrast(1.5) brightness(.9)}.cctv-mode:after{color:red;content:"REC ● " attr(data-time);font-family:monospace;font-size:1.5em;left:4%;pointer-events:none;position:fixed;text-shadow:0 0 5px #000;top:4%;z-index:2600}@keyframes hologram-flicker{0%,to{opacity:.8}50%{opacity:.7}}.damaged-hologram-mode{animation:glitch-text-shadow .1s infinite alternate,hologram-flicker .2s infinite}.damaged-hologram-mode:before{background:repeating-linear-gradient(90deg,transparent,rgba(0,0,0,.1) 50%,transparent);background-size:100% 4px;content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2500}@keyframes matrix-scroll{0%{background-position:0 0}to{background-position:0 -256px}}.matrix-code-mode{background-color:#000!important;color:#0f0!important}.matrix-code-mode:before{animation:matrix-scroll 5s linear infinite;background-image:url("data:image/svg+xml,...");content:"";height:100%;left:0;opacity:.2;pointer-events:none;position:fixed;top:0;width:100%;z-index:2400}.deep-space-mode{background-color:#000!important}.deep-space-mode #ai-content-placeholder,.deep-space-mode .draggable-panel{color:#eee;text-shadow:0 0 5px rgba(0,191,255,.5)}.deep-space-mode .content-section h2,.deep-space-mode .header h1{border-color:rgba(0,191,255,.5);color:#00bfff!important}.western-mode{filter:sepia(.6) brightness(.95)}.ink-wash-mode{filter:grayscale(1) contrast(1.2)}.oil-painting-mode:before{opacity:.15}.mosaic-mode:before,.oil-painting-mode:before{background-image:url("data:image/png;base64,...");content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2400}.mosaic-mode:before{opacity:.2}@keyframes storm-flow{0%{background-position:0 0}to{background-position:1000px 500px}}.sandstorm-mode:before{animation:storm-flow 2s linear infinite;background-color:hsla(34,44%,69%,.2);opacity:.1}.blizzard-mode:before,.sandstorm-mode:before{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXWBgYGHh4d5eXlzc3OLi4ubm5uVlZWPj4+NjY19fX2JiYl/f39ra2uRkZGZmZlpaWmXl5dvb29xcXGTk5NnZ2c8TV1mAAAAG3RSTlNAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAvEOwtAAAAFVJFREFUeNpiYGBkCAMyXxBgqKCBBQBcagwAiqtPkwAAAABJRU5ErkJggg==");content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2500}.blizzard-mode:before{animation:storm-flow 1s linear infinite;background-color:rgba(240,248,255,.2);opacity:.15}.deep-sea-mode{background-color:#000020!important}.deep-sea-mode:after{background:linear-gradient(0deg,rgba(0,10,30,.4),transparent);box-shadow:inset 0 0 15vw 8vw rgba(0,0,0,.8);content:"";height:100%;left:0;pointer-events:none;position:fixed;top:0;width:100%;z-index:2500}.deep-sea-mode #ai-content-placeholder{filter:brightness(.9)}.doc-translator-modal{display:flex;flex-direction:column;max-height:90vh;max-width:min(1200px,95vw);overflow:hidden;padding:0;text-align:left;width:95%}.doc-translator-modal h3{align-items:center;border-bottom:1px solid var(--border-color-dark);display:flex;flex-shrink:0;gap:10px;margin:0;padding:15px 25px}body:not(.dark-mode) .doc-translator-modal h3{border-color:var(--border-color-light)}.doc-translator-layout{display:flex;flex-grow:1;min-height:0}.doc-translator-left{border-right:1px solid var(--border-color-dark);display:flex;flex:1;flex-direction:column;gap:20px;min-width:300px;padding:20px 25px}body:not(.dark-mode) .doc-translator-left{border-color:var(--border-color-light)}.doc-translator-left .api-form-section.content-section{display:flex;flex-direction:column;flex-grow:1;margin-bottom:0;min-height:0}#doc-translator-content-textarea{flex-grow:1;resize:none}.doc-translator-right{flex-shrink:0;overflow-y:auto;padding:20px 25px;width:380px}.doc-translator-right .accordion-container{border-radius:6px;flex-shrink:0;margin-bottom:15px;overflow:hidden}body:not(.dark-mode) .doc-translator-right .accordion-container{border:1px solid var(--border-color-light)}body.dark-mode .doc-translator-right .accordion-container{border:1px solid var(--border-color-dark)}.doc-translator-right .accordion-header{cursor:pointer;font-weight:700;padding:12px 15px;position:relative;transition:background-color .2s;user-select:none}.doc-translator-right .accordion-header:after{content:"▼";font-size:.8em;position:absolute;right:15px;transition:transform .2s}.doc-translator-right .accordion-header.expanded:after{transform:rotate(180deg)}body:not(.dark-mode) .doc-translator-right .accordion-header{background-color:var(--quote-bg-light)}body.dark-mode .doc-translator-right .accordion-header{background-color:var(--quote-bg-dark)}.doc-translator-right .accordion-content{max-height:0;opacity:0;overflow:hidden;padding:0 15px;transition:max-height .3s ease-out,padding-top .3s ease-out,padding-bottom .3s ease-out,opacity .3s}.doc-translator-right .accordion-content.expanded{max-height:500px;opacity:1;overflow:visible;padding-bottom:15px;padding-top:15px}.doc-translator-modal .custom-modal-actions{border-top:1px solid var(--border-color-dark);flex-shrink:0;justify-content:flex-end;padding:15px 25px}body:not(.dark-mode) .doc-translator-modal .custom-modal-actions{border-color:var(--border-color-light)}@media (max-width:900px){.doc-translator-layout{flex-direction:column;overflow-y:auto}.doc-translator-left{border-right:none;box-sizing:border-box;min-width:unset;width:100%}.doc-translator-right{border-top:1px solid var(--border-color-dark);box-sizing:border-box;overflow-y:visible;width:100%}body:not(.dark-mode) .doc-translator-right{border-top-color:var(--border-color-light)}#doc-translator-content-textarea{min-height:300px}}.chunk-size-selector{align-items:center;display:flex;gap:10px;margin-top:5px}.chunk-btn{align-items:center;background:none;border:1px solid;border-radius:50%;cursor:pointer;display:flex;font-size:1.5em;font-weight:700;height:32px;justify-content:center;line-height:1;padding:0;transition:all .2s;width:32px}body:not(.dark-mode) .chunk-btn{border-color:var(--border-color-light);color:var(--text-color-light)}body:dark-mode .chunk-btn{border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) .chunk-btn:hover{background-color:var(--quote-bg-light);border-color:#a88a68}body:dark-mode .chunk-btn:hover{background-color:var(--quote-bg-dark);border-color:#d4b28c}.chunk-value{border-radius:6px;flex-grow:1;font-size:1.2em;font-weight:700;min-width:60px;padding:6px 10px;text-align:center;transition:background-color .3s ease,color .3s ease}.chunk-value.safe{background-color:#dff0d8;color:#3c763d}.chunk-value.caution{background-color:#fcf8e3;color:#8a6d3b}.chunk-value.danger{background-color:#f2dede;color:#a94442}body.dark-mode .chunk-value.safe{background-color:#2b3d2b;color:#98c379}body.dark-mode .chunk-value.caution{background-color:#49402b;color:#f0ad4e}body.dark-mode .chunk-value.danger{background-color:#4a2d2d;color:#d9534f}.status-dashboard{border-radius:8px;display:grid;font-size:.9em;gap:15px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));padding:10px}body:not(.dark-mode) .status-dashboard{background-color:var(--quote-bg-light)}body.dark-mode .status-dashboard{background-color:var(--quote-bg-dark)}.status-dashboard .status-module{border-radius:8px;display:flex;flex-direction:column;padding:15px}body:not(.dark-mode) .status-dashboard .status-module{background-color:var(--container-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .status-dashboard .status-module{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark)}.status-dashboard .status-module h4{align-items:center;display:flex;font-size:1em;font-weight:700;gap:8px;margin:0 0 12px;padding-bottom:8px}body:not(.dark-mode) .status-dashboard .status-module h4{border-bottom:1px solid var(--border-color-light);color:var(--h2-color-light)}body.dark-mode .status-dashboard .status-module h4{border-bottom:1px solid var(--border-color-dark);color:var(--h2-color-dark)}.status-dashboard .status-module h4 span{font-size:1.2em;line-height:1}.status-dashboard .status-module ul{flex-grow:1;list-style:none;margin:0;padding:0}.status-dashboard .status-module li{align-items:flex-start;display:flex;gap:10px;justify-content:space-between;line-height:1.5;margin-bottom:8px}.status-dashboard .status-module li:last-child{margin-bottom:0}.status-dashboard .status-module li .term{flex-shrink:0;opacity:.7;white-space:nowrap}.status-dashboard .status-module li .definition{font-weight:700;text-align:right;word-break:break-word}.status-dashboard .progress-bar-container{border-radius:4px;height:8px;margin:4px 0;overflow:hidden;width:100%}body:not(.dark-mode) .status-dashboard .progress-bar-container{background-color:var(--border-color-light)}body.dark-mode .status-dashboard .progress-bar-container{background-color:rgba(0,0,0,.3)}.status-dashboard .progress-bar{border-radius:4px;height:100%;transition:width .5s ease-in-out}body:not(.dark-mode) .status-dashboard .progress-bar{background-color:var(--h2-color-light)}body.dark-mode .status-dashboard .progress-bar{background-color:var(--h2-color-dark)}.status-dashboard .progress-percent-text{font-size:.9em;font-weight:700;opacity:.8;text-align:right}.status-dashboard .scan-table-module{border-radius:8px;display:flex;flex-direction:column;grid-column:1/-1;padding:15px}body:not(.dark-mode) .status-dashboard .scan-table-module{background-color:var(--container-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .status-dashboard .scan-table-module{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark)}.status-dashboard .scan-table-module table{border-collapse:collapse;font-size:.95em;margin-top:10px;width:100%}.status-dashboard .scan-table-module td,.status-dashboard .scan-table-module th{border:none;border-bottom:1px solid;padding:8px 10px;text-align:left;vertical-align:middle}body:not(.dark-mode) .status-dashboard .scan-table-module td,body:not(.dark-mode) .status-dashboard .scan-table-module th{border-color:var(--border-color-light)}body.dark-mode .status-dashboard .scan-table-module td,body.dark-mode .status-dashboard .scan-table-module th{border-color:var(--border-color-dark)}.status-dashboard .scan-table-module th{font-weight:700;opacity:.7}.status-dashboard .scan-table-module td:last-child{white-space:normal}.status-dashboard .scan-table-module tr:last-child td{border-bottom:none}body:not(.dark-mode) .status-dashboard .definition{color:var(--sub-text-color-light)}body.dark-mode .status-dashboard .definition{color:var(--sub-text-color-dark)}.status-dashboard .definition a{border-radius:12px;display:inline-block;font-size:.8em;font-weight:700;margin:0 4px;padding:3px 10px;text-decoration:none;transition:background-color .2s;vertical-align:middle}body:not(.dark-mode) .status-dashboard .definition a{background-color:#e9e9e9;border:1px solid #dcdcdc;color:#555}body:not(.dark-mode) .status-dashboard .definition a:hover{background-color:#dcdcdc}body.dark-mode .status-dashboard .definition a{background-color:#3a3a3a;border:1px solid #555;color:#e0e0e0}body.dark-mode .status-dashboard .definition a:hover{background-color:#4a4a4a;border-color:#666}#notes-app-panel{bottom:100px;height:700px;left:100px;overflow:visible;padding:0;width:600px}.notes-view{display:none;flex-direction:column;flex-grow:1;min-height:0}.action-bar,.notes-view.active{display:flex}.action-bar{align-items:center;border-bottom:1px solid var(--border-color-dark);flex-wrap:wrap;gap:10px;justify-content:space-between;padding:10px 15px}body:not(.dark-mode) .action-bar{border-bottom-color:var(--border-color-light)}.action-bar-group{align-items:center;display:flex;gap:10px}.action-bar-group.left{justify-content:flex-start}.action-bar-group.center{flex-grow:1;justify-content:center;min-width:120px}.action-bar-group.right{justify-content:flex-end}.search-input-notes{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);border-radius:20px;color:var(--text-color-dark);flex-grow:1;padding:8px 12px}body:not(.dark-mode) .search-input-notes{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}.notes-btn{align-items:center;background-color:var(--h2-color-dark);border:none;border-radius:20px;color:#fff;cursor:pointer;display:flex;gap:6px;justify-content:center;padding:8px 15px;white-space:nowrap}body:not(.dark-mode) .notes-btn{background-color:var(--h2-color-light)}.notes-btn svg{fill:currentColor;height:16px;width:16px}.more-options-container{position:relative}.more-options-btn{background:none;border:none;border-radius:50%;cursor:pointer;line-height:0;padding:5px}body.dark-mode .more-options-btn{color:var(--text-color-dark)}body:not(.dark-mode) .more-options-btn{color:var(--text-color-light)}.more-options-btn:hover{background-color:hsla(0,0%,50%,.2)}.dropdown-menu{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);border-radius:6px;box-shadow:0 4px 12px rgba(0,0,0,.2);display:none;min-width:180px;padding:5px;position:absolute;right:0;top:100%;z-index:1550}body:not(.dark-mode) .dropdown-menu{background-color:var(--container-bg-light);border-color:var(--border-color-light)}.dropdown-menu.show{display:block}.dropdown-item{align-items:center;background:none;border:none;border-radius:4px;color:inherit;cursor:pointer;display:flex;font-family:Gowun Batang,serif;font-size:1em;gap:8px;padding:8px 12px;text-align:left;width:100%}body:not(.dark-mode) .dropdown-item:hover{background-color:var(--quote-bg-light)}body.dark-mode .dropdown-item:hover{background-color:var(--quote-bg-dark)}.dropdown-separator{background-color:var(--border-color-dark);height:1px;margin:4px 8px}body:not(.dark-mode) .dropdown-separator{background-color:var(--border-color-light)}#notes-list{flex-grow:1;overflow-y:auto;padding:10px}.note-group-header{color:var(--sub-text-color-dark);font-size:.9em;font-weight:700;padding:15px 5px 5px}body:not(.dark-mode) .note-group-header{color:var(--sub-text-color-light)}.note-project-container{margin-bottom:5px}.note-project-header{align-items:center;border-radius:6px;cursor:pointer;display:flex;justify-content:flex-start;padding:10px 5px;position:relative;transition:background-color .2s,border .2s}body:not(.dark-mode) .note-project-header:hover{background-color:var(--quote-bg-light)}body:dark-mode .note-project-header:hover{background-color:var(--quote-bg-dark)}.note-project-header.drag-over{background-color:var(--h2-border-light)!important;border:1px dashed var(--h2-color-light)}body.dark-mode .note-project-header.drag-over{background-color:var(--h2-border-dark)!important;border-color:var(--h2-color-dark)}.note-project-toggle-icon{line-height:0;margin-right:5px;transition:transform .2s ease-in-out}.note-project-toggle-icon.expanded{transform:rotate(90deg)}.note-project-icon{line-height:0;margin-right:8px}.note-project-header svg{fill:currentColor}.note-project-title{flex-grow:1;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.note-project-controls{align-items:center;display:flex;gap:8px;margin-left:10px}.note-count{color:var(--sub-text-color-dark);font-size:.8em;font-weight:400}body:not(.dark-mode) .note-count{color:var(--sub-text-color-light)}.note-item-title-input,.note-project-title-input{background:transparent;border:none;border-radius:4px;box-sizing:border-box;color:inherit;flex-grow:1;font-family:Gowun Batang,serif;font-size:1em;font-weight:700;outline:1px solid;padding:2px 4px}body.dark-mode .note-item-title-input,body.dark-mode .note-project-title-input{outline-color:var(--header-color-dark)}body:not(.dark-mode) .note-item-title-input,body:not(.dark-mode) .note-project-title-input{outline-color:var(--header-color-light)}.notes-in-project{max-height:0;overflow:hidden;padding-left:20px;transition:max-height .3s ease-in-out}.notes-in-project.expanded{max-height:1000px}.note-item{align-items:center;border-radius:6px;cursor:pointer;display:flex;gap:10px;margin-bottom:8px;padding:12px 15px;position:relative;transition:background-color .2s}.note-item.is-dragging{background-color:var(--h2-border-dark);cursor:grabbing;opacity:.5}.note-item:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .note-item:hover{background-color:var(--quote-bg-light)}.note-item-content{flex-grow:1;min-width:0}.note-item-title{font-weight:700;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.note-item-date{font-size:.8em;opacity:.7}.note-select-checkbox{display:none;flex-shrink:0;margin:0}.selection-mode .note-item{cursor:pointer}.selection-mode .note-item-content{pointer-events:none}.selection-mode .note-select-checkbox{display:block}.selection-mode .note-item:hover{background-color:var(--strong-bg-dark)}body:not(.dark-mode) .selection-mode .note-item:hover{background-color:var(--strong-bg-light)}#note-selection-bar{align-items:center;bottom:0;display:flex;justify-content:space-between;left:0;padding:15px 20px;position:absolute;right:0;transform:translateY(100%);transition:transform .3s ease-in-out;z-index:10}#note-selection-bar.visible{transform:translateY(0)}body:not(.dark-mode) #note-selection-bar{background-color:#eaddc7;border-top:1px solid var(--border-color-light)}body.dark-mode #note-selection-bar{background-color:#2a2a2a;border-top:1px solid var(--border-color-dark)}#selection-bar-info{font-weight:700}#selection-bar-actions{display:flex;gap:10px}#note-editor-view .editor-header{align-items:center;border-bottom:1px solid var(--border-color-dark);display:flex;flex-shrink:0;gap:10px;justify-content:flex-start;padding:10px}body:not(.dark-mode) #note-editor-view .editor-header{border-bottom-color:var(--border-color-light)}#note-title-input{background:transparent;border:none;color:inherit;font-size:1.2em;font-weight:700;padding:10px 15px;width:100%}#toast-editor{box-sizing:border-box;flex-grow:1;width:100%}#auto-save-status{font-size:.8em;margin-left:auto;opacity:.7;padding:5px 15px;text-align:right}#note-recall-view .editor-header{align-items:center;border-bottom:1px solid var(--border-color-dark);display:flex;flex-shrink:0;gap:10px;justify-content:space-between;padding:10px}body:not(.dark-mode) #note-recall-view .editor-header{border-bottom-color:var(--border-color-light)}.recall-header-group{align-items:center;display:flex;gap:10px}.recall-header-group.left{flex-grow:1;min-width:0}.recall-header-group.right{flex-shrink:0}#recall-search-input{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);border-radius:15px;color:var(--text-color-dark);font-size:.9em;padding:6px 10px;width:200px}body:not(.dark-mode) #recall-search-input{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}#note-recall-view .recall-title{flex-grow:1;font-size:1.1em;font-weight:700;overflow:hidden;padding:0 10px;text-align:left;text-overflow:ellipsis;white-space:nowrap}.recall-container{display:flex;flex-grow:1;overflow:hidden}#recall-turn-list-container{flex-shrink:0;overflow-y:auto;padding:10px;transition:width .3s ease-in-out,padding .3s ease-in-out,border-width .3s ease-in-out;width:180px}body:not(.dark-mode) #recall-turn-list-container{border-right:1px solid var(--border-color-light)}body.dark-mode #recall-turn-list-container{border-right:1px solid var(--border-color-dark)}.recall-turn-item{border-radius:6px;cursor:pointer;font-weight:700;margin-bottom:5px;padding:8px 12px;transition:background-color .2s}body:not(.dark-mode) .recall-turn-item:hover{background-color:var(--quote-bg-light)}body:dark-mode .recall-turn-item:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .recall-turn-item.active{background-color:var(--strong-bg-light);color:var(--h2-color-light)}body.dark-mode .recall-turn-item.active{background-color:var(--strong-bg-dark);color:var(--h2-color-dark)}#recall-content-container{flex-grow:1;overflow:hidden;position:relative}#recall-content-area{bottom:20px;left:20px;overflow-y:auto;padding-right:15px;position:absolute;right:0;top:20px}#recall-content-area .ordered-list{opacity:.7;pointer-events:none}#recall-toast-editor{box-sizing:border-box;height:100%;width:100%}#recall-content-area .toastui-editor-defaultUI{border:none;height:100%}#recall-sidebar-toggle-btn{flex-shrink:0}#recall-sidebar-toggle-btn svg{transition:transform .3s ease-in-out}#note-recall-view.recall-sidebar-collapsed #recall-sidebar-toggle-btn svg{transform:rotate(180deg)}#note-recall-view.recall-sidebar-collapsed #recall-turn-list-container{border-right-width:0;overflow:hidden;padding-left:0;padding-right:0;width:0}.note-project-action-btn{background:none;border:none;border-radius:50%;cursor:pointer;line-height:0;opacity:.6;padding:3px;transition:all .2s}.note-project-action-btn:hover{background-color:hsla(0,0%,50%,.2);opacity:1;transform:scale(1.1)}.note-project-action-btn svg{fill:currentColor;height:16px;width:16px}#recall-compatibility-toggle,#recall-editor-toggle,#recall-export-html-btn,.extract-data-btn,.note-project-recall-btn,.select-mode-btn,.translation-start-btn{align-items:center;border-radius:12px!important;display:inline-flex;font-size:.8em;font-weight:700;gap:4px;opacity:.8!important;padding:4px 10px!important}#recall-compatibility-toggle svg,#recall-editor-toggle svg,#recall-export-html-btn svg,.extract-data-btn svg,.note-project-recall-btn svg,.select-mode-btn svg,.translation-start-btn svg{height:14px;width:14px}#recall-compatibility-toggle:hover,#recall-editor-toggle:hover,#recall-export-html-btn:hover,.extract-data-btn:hover,.note-project-recall-btn:hover,.select-mode-btn:hover,.translation-start-btn:hover{opacity:1!important;transform:scale(1.05)}body:not(.dark-mode) #recall-compatibility-toggle,body:not(.dark-mode) #recall-editor-toggle,body:not(.dark-mode) #recall-export-html-btn,body:not(.dark-mode) .extract-data-btn,body:not(.dark-mode) .note-project-recall-btn,body:not(.dark-mode) .select-mode-btn,body:not(.dark-mode) .translation-start-btn{background-color:var(--quote-bg-light);border:1px solid var(--border-color-light)}body:not(.dark-mode) .extract-data-btn{color:var(--h2-color-light)}body:not(.dark-mode) .select-mode-btn{color:#337ab7}body:not(.dark-mode) .note-project-recall-btn{color:#5cb85c}body:not(.dark-mode) #recall-compatibility-toggle{color:var(--sub-text-color-light)}body:not(.dark-mode) #recall-editor-toggle{color:#f0ad4e}body:not(.dark-mode) #recall-export-html-btn{color:#6f42c1}body:not(.dark-mode) .translation-start-btn{color:#31708f}body:not(.dark-mode) .extract-data-btn:hover{background-color:#e6e0d4;border-color:var(--h2-border-light)}body:not(.dark-mode) .select-mode-btn:hover{background-color:#e6e0d4;border-color:#337ab7}body:not(.dark-mode) .note-project-recall-btn:hover{background-color:#e6e0d4;border-color:#5cb85c}body:not(.dark-mode) #recall-compatibility-toggle:hover,body:not(.dark-mode) #recall-editor-toggle:hover{background-color:#e6e0d4}body:not(.dark-mode) #recall-export-html-btn:hover{background-color:#e6e0d4;border-color:#6f42c1}body:not(.dark-mode) .translation-start-btn:hover{background-color:#e6e0d4;border-color:#31708f}body.dark-mode #recall-compatibility-toggle,body.dark-mode #recall-editor-toggle,body.dark-mode #recall-export-html-btn,body.dark-mode .extract-data-btn,body.dark-mode .note-project-recall-btn,body.dark-mode .select-mode-btn,body.dark-mode .translation-start-btn{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark)}body.dark-mode .extract-data-btn{color:var(--h2-color-dark)}body.dark-mode .select-mode-btn{color:#5bc0de}body.dark-mode .note-project-recall-btn{color:#98c379}body.dark-mode #recall-compatibility-toggle{color:var(--sub-text-color-dark)}body.dark-mode #recall-editor-toggle{color:#f0ad4e}body.dark-mode #recall-export-html-btn{color:#bb86fc}body.dark-mode .translation-start-btn{color:#5bc0de}body.dark-mode .extract-data-btn:hover{background-color:#444;border-color:var(--h2-border-dark)}body.dark-mode .select-mode-btn:hover{background-color:#444;border-color:#5bc0de}body.dark-mode .note-project-recall-btn:hover{background-color:#444;border-color:#98c379}body.dark-mode #recall-compatibility-toggle:hover,body.dark-mode #recall-editor-toggle:hover{background-color:#444}body.dark-mode #recall-export-html-btn:hover{background-color:#444;border-color:#bb86fc}body.dark-mode .translation-start-btn:hover{background-color:#444;border-color:#5bc0de}body:not(.dark-mode) #choice-comprehensive-report .main-action{color:#6f42c1}body:not(.dark-mode) #choice-comprehensive-report:hover .main-action,body:not(.dark-mode) #choice-comprehensive-report:hover .more-action{background-color:#f0e6ff;border-color:#6f42c1}body.dark-mode #choice-comprehensive-report .main-action{color:#bb86fc}body.dark-mode #choice-comprehensive-report:hover .main-action,body.dark-mode #choice-comprehensive-report:hover .more-action{background-color:#3c2d4a;border-color:#bb86fc}#recall-compatibility-toggle.active,#recall-editor-toggle.active,.note-project-header.selection-active .select-mode-btn{font-weight:700}body:not(.dark-mode) #recall-compatibility-toggle.active,body:not(.dark-mode) #recall-editor-toggle.active,body:not(.dark-mode) .note-project-header.selection-active .select-mode-btn{background-color:#d9edf7;border-color:#bce8f1;color:#31708f}body.dark-mode #recall-compatibility-toggle.active,body.dark-mode #recall-editor-toggle.active,body.dark-mode .note-project-header.selection-active .select-mode-btn{background-color:#314550;border-color:#5bc0de;color:#5bc0de}body:not(.dark-mode) #recall-editor-toggle.active{background-color:#fcf8e3;border-color:#faebcc;color:#8a6d3b}body.dark-mode #recall-editor-toggle.active{background-color:#49402b;border-color:#f0ad4e;color:#f0ad4e}.split-button-container{display:flex;min-height:85px;min-width:110px}.split-button-container .modal-btn{align-items:center;display:flex;flex-direction:column;gap:4px;justify-content:center;padding:12px 8px}.split-button-container .main-action{border-bottom-right-radius:0;border-top-right-radius:0;flex-grow:1}.split-button-container .more-action{border-bottom-left-radius:0;border-top-left-radius:0;flex-shrink:0;padding-left:5px;padding-right:5px;width:40px}body:not(.dark-mode) .split-button-container .more-action{border-left:1px solid rgba(0,0,0,.1)}body.dark-mode .split-button-container .more-action{border-left:1px solid hsla(0,0%,100%,.1)}#chat-panel{bottom:100px;flex-direction:row;height:600px;min-height:350px;min-width:350px;overflow:hidden;right:100px;width:700px}#chat-main-view{display:flex;flex-direction:column;flex-grow:1;min-width:0}#chat-main-view .panel-header{align-items:center;flex-direction:row;flex-wrap:nowrap}#sidebar-toggle-btn{align-items:center;background:none;border:none;border-radius:5px;cursor:pointer;display:flex;flex-shrink:0;justify-content:center;margin-right:8px;padding:5px}#sidebar-toggle-btn svg{fill:currentColor;transition:transform .3s ease}#chat-panel.sidebar-collapsed #sidebar-toggle-btn svg{transform:rotate(180deg)}body.dark-mode #sidebar-toggle-btn:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) #sidebar-toggle-btn:hover{background-color:var(--quote-bg-light)}#chat-session-title{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}body.dark-mode #sidebar-toggle-btn{color:var(--text-color-dark)}body:not(.dark-mode) #sidebar-toggle-btn{color:var(--text-color-light)}@keyframes status-pulse{0%{background-color:#5e97f6;box-shadow:0 0 0 0 rgba(94,151,246,.7);transform:scale(.8)}70%{background-color:#8bb6f8;box-shadow:0 0 0 10px rgba(94,151,246,0);transform:scale(1)}to{background-color:#5e97f6;box-shadow:0 0 0 0 rgba(94,151,246,0);transform:scale(.8)}}@keyframes status-pulse-complete{0%{background-color:#d4b28c;box-shadow:0 0 0 0 hsla(32,46%,69%,.7);transform:scale(.8)}70%{background-color:#eadcb5;box-shadow:0 0 0 10px hsla(32,46%,69%,0);transform:scale(1)}to{background-color:#d4b28c;box-shadow:0 0 0 0 hsla(32,46%,69%,0);transform:scale(.8)}}#chat-session-sidebar{display:flex;flex-direction:column;flex-shrink:0;overflow:hidden;transition:width .3s ease,padding .3s ease,border-color .3s;white-space:nowrap;width:220px}#chat-panel.sidebar-collapsed #chat-session-sidebar{border-right-width:0;padding-left:0;padding-right:0;width:0}body.dark-mode #chat-session-sidebar{border-right:1px solid var(--border-color-dark)}body:not(.dark-mode) #chat-session-sidebar{border-right:1px solid var(--border-color-light)}#sidebar-header{display:flex;flex-direction:column;flex-shrink:0;gap:10px;padding:10px}.sidebar-controls{align-items:center;display:flex;gap:8px}#search-sessions-input{border:1px solid;border-radius:20px;box-sizing:border-box;flex-grow:1;font-family:Gowun Batang,serif;min-width:0;outline:none;padding:8px 12px}#temp-session-toggle{align-items:center;background:none;border:1px solid;border-radius:50%;cursor:pointer;display:flex;flex-shrink:0;height:34px;justify-content:center;opacity:.6;transition:all .3s;width:34px}#temp-session-toggle.active{opacity:1}#temp-session-toggle svg{fill:currentColor}body.dark-mode #temp-session-toggle{border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #temp-session-toggle{border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #temp-session-toggle.active{background-color:var(--h2-border-dark)}body:not(.dark-mode) #temp-session-toggle.active{background-color:var(--h2-border-light)}body.dark-mode #search-sessions-input{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #search-sessions-input{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}.sidebar-button-group{display:flex;gap:8px}.sidebar-button-group button{align-items:center;border:none;border-radius:8px;cursor:pointer;display:flex;flex-grow:1;font-family:Gowun Batang,serif;font-size:.95em;gap:6px;justify-content:center;padding:8px;transition:background-color .2s;white-space:nowrap}.sidebar-button-group button svg{fill:currentColor}body.dark-mode .sidebar-button-group button{background-color:var(--h2-color-dark);color:var(--bg-color-dark)}body:not(.dark-mode) .sidebar-button-group button{background-color:var(--h2-color-light);color:#fff}body.dark-mode .sidebar-button-group button:hover{background-color:#d4b28c}body:not(.dark-mode) .sidebar-button-group button:hover{background-color:#a88a68}#session-list-container{flex-grow:1;overflow-y:auto;padding:0 10px 10px}.date-group-header,.session-group-header{font-size:.8em;font-weight:700;letter-spacing:.5px;padding:15px 5px 5px;text-transform:uppercase}body.dark-mode .date-group-header,body.dark-mode .session-group-header{color:var(--sub-text-color-dark)}body:not(.dark-mode) .date-group-header,body:not(.dark-mode) .session-group-header{color:var(--sub-text-color-light)}.session-group-header{font-size:.9em}.project-header{align-items:center;border-radius:6px;cursor:pointer;display:flex;padding:10px 5px;position:relative;transition:background-color .2s,border .2s}svg.project-toggle-icon{fill:currentColor;line-height:0;margin-right:5px;pointer-events:none;transition:transform .2s ease-in-out}svg.project-toggle-icon.expanded{transform:rotate(90deg)}.sessions-in-project{display:none;padding-left:20px}.sessions-in-project.expanded{display:block}.project-header.drag-over{background-color:var(--strong-bg-dark)!important;border:2px dashed var(--h2-color-dark)}body:not(.dark-mode) .project-header.drag-over{background-color:var(--strong-bg-light)!important;border-color:var(--h2-color-light)}.session-item{align-items:center;border-radius:6px;cursor:pointer;display:flex;font-size:.92em;justify-content:space-between;margin-bottom:4px;overflow:hidden;padding:7px 10px;position:relative;text-overflow:ellipsis;transition:background-color .2s,opacity .2s,border .2s;white-space:nowrap}.session-item.temporary{font-style:italic}body.dark-mode .session-item.temporary{background-color:rgba(42,42,42,.5)}body:not(.dark-mode) .session-item.temporary{background-color:hsla(42,33%,92%,.5)}.session-item.is-dragging{background-color:var(--h2-border-dark);cursor:grabbing;opacity:.5}.session-item.drag-over{background-color:var(--strong-bg-dark);border:2px dashed var(--h2-color-dark)}body:not(.dark-mode) .session-item.drag-over{background-color:var(--strong-bg-light);border-color:var(--h2-color-light)}body.dark-mode .session-item:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .session-item:hover{background-color:var(--quote-bg-light)}.session-item.active{font-weight:700}body.dark-mode .session-item.active{background-color:var(--strong-bg-dark);color:var(--header-color-dark)}body:not(.dark-mode) .session-item.active{background-color:var(--strong-bg-light);color:var(--h2-color-light)}.status-indicator{animation:status-pulse 2s infinite}.status-indicator,.status-indicator-complete{border-radius:50%;flex-shrink:0;height:8px;margin-left:auto;margin-right:5px;width:8px}.status-indicator-complete{animation:status-pulse-complete 2.5s infinite}.session-item-title{flex-grow:1;margin-right:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.project-actions-btn{background:none;border:none;border-radius:50%;cursor:pointer;flex-shrink:0;line-height:0;padding:3px;transition:background-color .2s,transform .2s}.project-actions-btn svg{fill:currentColor}body.dark-mode .project-actions-btn{color:var(--sub-text-color-dark)}body:not(.dark-mode) .project-actions-btn{color:var(--sub-text-color-light)}.project-actions-btn:hover{background-color:hsla(0,0%,50%,.2);transform:scale(1.1)}@keyframes blink{50%{border-color:transparent}}@keyframes pulse{0%,80%,to{opacity:.5;transform:scale(0)}40%{opacity:1;transform:scale(1)}}.blinking-cursor:after{animation:blink 1s infinite;background-color:currentColor;content:"";display:inline-block;height:1.2em;margin-left:3px;vertical-align:middle;width:1px}.loading-animation{align-items:center;display:flex;gap:5px}.loading-animation .dot{animation:pulse 1.4s ease-in-out infinite both;background-color:currentColor;border-radius:50%;height:8px;width:8px}.loading-animation .dot:first-child{animation-delay:-.32s}.loading-animation .dot:nth-child(2){animation-delay:-.16s}.chat-messages{gap:12px;overflow-y:auto;padding:15px}#chat-welcome-message,.chat-messages{display:flex;flex-direction:column;flex-grow:1}#chat-welcome-message{align-items:center;font-size:1.1em;height:100%;justify-content:center;opacity:.6;text-align:center;user-select:none}#chat-welcome-message h3{font-family:"Noto Serif KR",serif;margin-bottom:5px}.chat-message{border-radius:8px;line-height:1.6;max-width:85%;overflow-wrap:break-word;padding:12px 18px}.user-message-container{align-items:flex-end;display:flex;flex-direction:column;gap:4px}.chat-message.user{align-items:flex-start;align-self:flex-end;border-left:3px solid #5e97f6;display:flex;flex-direction:column;padding-left:15px}body.dark-mode .chat-message.user{background-color:#2a2c3c}body:not(.dark-mode) .chat-message.user{background-color:#e8eaf6}.ai-response-container{align-items:flex-start;align-self:flex-start;display:flex;flex-direction:column;gap:4px;max-width:90%;min-width:0}body:dark-mode .ai-response-container .chat-message.ai{background-color:transparent}body:not(.dark-mode) .ai-response-container .chat-message.ai{background-color:transparent}.ai-response-meta{align-items:center;display:flex;font-size:.8em;gap:5px;margin-left:5px;opacity:.6}.ai-response-meta svg{fill:currentColor}.chat-message.user p{margin-bottom:10px;margin-top:0}.chat-message.user p:last-child{margin-bottom:0}.attachment-chip{align-items:center;border-radius:16px;display:inline-flex;font-size:.9em;gap:8px;margin-top:5px;padding:6px 12px}.attachment-chip span{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}body.dark-mode .attachment-chip{background-color:hsla(0,0%,100%,.1);border:1px solid var(--border-color-dark)}body:not(.dark-mode) .attachment-chip{background-color:rgba(0,0,0,.05);border:1px solid var(--border-color-light)}.message-attachment-thumbnail{align-self:flex-start;border-radius:6px;margin-top:8px;max-height:250px;max-width:250px;object-fit:contain}.chat-message.collapsed{display:-webkit-box;overflow:hidden;position:relative;-webkit-box-orient:vertical;-webkit-line-clamp:3}.chat-message.collapsed:after{bottom:0;content:"";height:2em;left:0;pointer-events:none;position:absolute;right:0}body:not(.dark-mode) .chat-message.user.collapsed:after{background:linear-gradient(to top,var(--chat-ai-bg-light) 20%,transparent)}body.dark-mode .chat-message.user.collapsed:after{background:linear-gradient(0deg,#2a2c3c 20%,transparent)}body:not(.dark-mode) .chat-message.ai.collapsed:after{background:linear-gradient(to top,var(--container-bg-light) 20%,transparent)}body.dark-mode .chat-message.ai.collapsed:after{background:linear-gradient(to top,var(--container-bg-dark) 20%,transparent)}.toggle-visibility-btn{background:none;border:1px solid;border-radius:12px;cursor:pointer;font-size:.8em;font-weight:700;margin-top:8px;opacity:.8;padding:4px 12px;transition:all .2s}.toggle-visibility-btn.with-icon{align-items:center;display:inline-flex;gap:6px;line-height:1}.toggle-visibility-btn:hover{opacity:1;transform:scale(1.05)}.toggle-visibility-btn svg{fill:currentColor;height:14px;width:14px}body:not(.dark-mode) .toggle-visibility-btn{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--sub-text-color-light)}body:not(.dark-mode) .toggle-visibility-btn:hover{background-color:#e6e0d4;border-color:#ccc;color:var(--text-color-light)}body.dark-mode .toggle-visibility-btn{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--sub-text-color-dark)}body.dark-mode .toggle-visibility-btn:hover{background-color:#444;border-color:#555;color:var(--text-color-dark)}.refinement-download-btn{align-items:center;align-self:flex-start;border:1px solid;border-radius:20px;cursor:pointer;display:inline-flex;font-family:Gowun Batang,serif;font-size:.9em;gap:8px;margin-top:10px;padding:8px 15px;transition:all .2s ease}.refinement-download-btn svg{fill:currentColor}body:not(.dark-mode) .refinement-download-btn{background-color:var(--strong-bg-light);border-color:var(--h2-border-light);color:var(--h2-color-light)}body:not(.dark-mode) .refinement-download-btn:hover{background-color:#e6d3a9}body.dark-mode .refinement-download-btn{background-color:var(--strong-bg-dark);border-color:var(--h2-border-dark);color:var(--h2-color-dark)}body.dark-mode .refinement-download-btn:hover{background-color:#6a5a4a}@keyframes fade-up-chunk{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.stream-chunk{animation:fade-up-chunk .3s ease-out forwards;display:inline-block}.grounding-sources-container{align-items:center;border-top:1px dashed;display:flex;flex-wrap:wrap;font-size:.85em;gap:8px;margin-top:12px;padding-top:10px}body:not(.dark-mode) .grounding-sources-container{border-color:var(--border-color-light)}body.dark-mode .grounding-sources-container{border-color:var(--border-color-dark)}.sources-label{font-weight:700;opacity:.8}.source-link{align-items:center;border-radius:12px;display:inline-flex;gap:4px;padding:3px 8px;text-decoration:none;transition:background-color .2s}.source-index{border-radius:50%;display:inline-block;font-size:.8em;font-weight:700;height:16px;line-height:16px;text-align:center;width:16px}body:not(.dark-mode) .source-link{background-color:var(--quote-bg-light);border:1px solid var(--border-color-light);color:var(--header-color-light)}body:not(.dark-mode) .source-link:hover{background-color:#e6e0d4}body:not(.dark-mode) .source-index{background-color:var(--header-color-light);color:#fff}body.dark-mode .source-link{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);color:var(--header-color-dark)}body.dark-mode .source-link:hover{background-color:#444}body.dark-mode .source-index{background-color:var(--header-color-dark);color:var(--bg-color-dark)}.chat-input-form{align-items:center;border-top:1px solid;display:flex;padding:10px;transition:border-color .3s}body.dark-mode .chat-input-form{border-top-color:var(--border-color-dark)}body:not(.dark-mode) .chat-input-form{border-top-color:var(--border-color-light)}#chat-input{border:1px solid;border-radius:20px;flex-grow:1;font-family:Gowun Batang,serif;font-size:1em;line-height:1.6;max-height:98px;outline:none;overflow-y:auto;padding:10px 15px;resize:none;transition:all .3s}body.dark-mode #chat-input{background-color:#2a2a2a;border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #chat-input{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}#chat-send-btn{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center;padding:0 10px;transition:color .3s}#chat-send-btn svg{fill:currentColor}body.dark-mode #chat-send-btn{color:var(--header-color-dark)}body:not(.dark-mode) #chat-send-btn{color:var(--header-color-light)}#chat-attach-btn{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center;margin-right:5px;opacity:.6;padding:0 8px;transition:opacity .3s}#chat-attach-btn:hover{opacity:1}#chat-attach-btn svg{fill:currentColor}body.dark-mode #chat-attach-btn{color:var(--text-color-dark)}body:not(.dark-mode) #chat-attach-btn{color:var(--text-color-light)}#attached-file-display{align-items:flex-start;border-radius:8px;display:none;gap:10px;margin:0 10px 5px;padding:8px}body.dark-mode #attached-file-display{background-color:var(--quote-bg-dark)}body:not(.dark-mode) #attached-file-display{background-color:var(--quote-bg-light)}.file-info{align-items:center;display:flex;flex-grow:1;gap:8px;min-width:0}.file-info span{font-size:.9em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-info svg{flex-shrink:0}.remove-file-btn{background:none;border:none;cursor:pointer;flex-shrink:0;font-size:1.2em;line-height:1;opacity:.7;padding:2px 5px}.remove-file-btn:hover{opacity:1}.attachment-preview-img{border-radius:4px;height:auto;max-height:60px;max-width:60px;object-fit:cover}#chat-control-deck{align-items:center;border-bottom:1px solid transparent;display:flex;gap:15px;justify-content:flex-end;padding:8px 10px}body:not(.dark-mode) #chat-control-deck{border-bottom-color:var(--border-color-light)}body.dark-mode #chat-control-deck{border-bottom-color:var(--border-color-dark)}#settings-control-container{position:relative}#settings-button{align-items:center;border:1px solid;border-radius:6px;cursor:pointer;display:flex;font-size:.9em;gap:8px;padding:6px 12px;transition:all .2s}#settings-button .settings-icon svg{fill:currentColor}#settings-display-text{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#settings-popover{border:1px solid;border-radius:8px;box-shadow:0 5px 15px rgba(0,0,0,.2);display:none;margin-top:8px;padding:15px;position:absolute;right:0;top:100%;width:320px;z-index:1200}#settings-popover.show{display:block}.popover-section{margin-bottom:15px}.popover-section:last-of-type{margin-bottom:0}.popover-section label{display:block;font-size:.9em;font-weight:700;margin-bottom:8px}.popover-section select{border:1px solid;border-radius:6px;font-family:Gowun Batang,serif;padding:8px 10px;width:100%}.prompt-popover-group{display:flex;gap:8px}.prompt-popover-group select{flex-grow:1}.prompt-popover-group button{border:1px solid;border-radius:6px;cursor:pointer;flex-shrink:0;padding:0 10px}.prompt-manager-modal{height:80vh;max-height:600px;max-width:800px;overflow:hidden;padding:0;position:relative;width:95%}.prompt-manager-modal .close-btn{right:15px;top:15px}.prompt-manager-container{display:flex;height:100%;width:100%}.template-list-panel{display:flex;flex-direction:column;flex-shrink:0;padding:20px;width:250px}body.dark-mode .template-list-panel{background-color:var(--bg-color-dark);border-right:1px solid var(--border-color-dark)}body:not(.dark-mode) .template-list-panel{background-color:var(--bg-color-light);border-right:1px solid var(--border-color-light)}.template-list-panel h3{margin-bottom:15px;margin-top:0;text-align:center}#template-list-container{flex-grow:1;margin-bottom:15px;overflow-y:auto}.template-list-item{border-radius:6px;cursor:pointer;margin-bottom:5px;overflow:hidden;padding:10px 15px;text-overflow:ellipsis;transition:background-color .2s;white-space:nowrap}.template-list-item.is-default .item-name:after{content:" (기본)";font-size:.8em;margin-left:5px;opacity:.7}body:not(.dark-mode) .template-list-item:hover{background-color:var(--quote-bg-light)}body.dark-mode .template-list-item:hover{background-color:var(--quote-bg-dark)}body.dark-mode .template-list-item.active{background-color:var(--h2-color-dark);color:var(--bg-color-dark);font-weight:700}body:not(.dark-mode) .template-list-item.active{background-color:var(--h2-color-light);color:#fff;font-weight:700}.template-editor-panel{display:flex;flex-direction:column;flex-grow:1;padding:20px 30px}.editor-form-group{display:flex;flex-direction:column;margin-bottom:20px}.editor-form-group:last-of-type{flex-grow:1}.editor-form-group label{font-weight:700;margin-bottom:8px}.editor-form-group input,.editor-form-group textarea{border:1px solid;border-radius:6px;box-sizing:border-box;font-family:Gowun Batang,serif;font-size:1em;padding:10px 12px;width:100%}body:not(.dark-mode) .editor-form-group input,body:not(.dark-mode) .editor-form-group textarea{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode .editor-form-group input,body.dark-mode .editor-form-group textarea{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}.editor-form-group textarea{flex-grow:1;resize:none}.editor-actions{display:flex;gap:15px;justify-content:flex-end;margin-top:20px}.editor-actions .modal-btn{border:none;border-radius:5px;cursor:pointer;padding:10px 25px}.editor-actions .modal-btn.confirm{background-color:var(--h2-color-light);color:#fff}body.dark-mode .editor-actions .modal-btn.confirm{background-color:var(--h2-color-dark);color:var(--bg-color-dark)}.editor-actions .modal-btn.cancel{background-color:#d9534f;color:#fff}.editor-actions .modal-btn:disabled{cursor:not-allowed;opacity:.5}.prompt-manager-modal .close-btn{align-items:center;background:none;border:none;border-radius:50%;color:inherit;cursor:pointer;display:flex;height:36px;justify-content:center;opacity:.6;position:absolute;right:10px;top:10px;transition:background-color .2s,opacity .2s,transform .2s;width:36px;z-index:10}.prompt-manager-modal .close-btn:hover{opacity:1;transform:scale(1.1)}body:not(.dark-mode) .prompt-manager-modal .close-btn:hover{background-color:var(--quote-bg-light)}body.dark-mode .prompt-manager-modal .close-btn:hover{background-color:var(--quote-bg-dark)}#context-toggle-btn{align-items:center;border-radius:50%;display:flex;height:36px;justify-content:center;opacity:.6;padding:0;width:36px}#context-toggle-btn:hover{opacity:1}body:not(.dark-mode) #context-toggle-btn:hover{background-color:var(--quote-bg-light)}body.dark-mode #context-toggle-btn:hover{background-color:var(--quote-bg-dark)}#context-toggle-btn.active{opacity:1}body:not(.dark-mode) #context-toggle-btn.active{background-color:var(--strong-bg-light)}body.dark-mode #context-toggle-btn.active{background-color:var(--strong-bg-dark)}#context-toggle-btn .icon-context-off,#context-toggle-btn .icon-context-on{font-size:22px;line-height:1;transition:transform .2s ease-in-out}#context-toggle-btn:hover .icon-context-off,#context-toggle-btn:hover .icon-context-on{transform:scale(1.1)}#context-toggle-btn .icon-context-on{display:block}#context-toggle-btn .icon-context-off,#context-toggle-btn.active .icon-context-on{display:none}#context-toggle-btn.active .icon-context-off{display:block}#grounding-quick-toggle-btn{align-items:center;border-radius:50%;display:flex;font-size:18px;height:36px;justify-content:center;line-height:1;opacity:.6;transition:all .2s;width:36px}#grounding-quick-toggle-btn.active,#grounding-quick-toggle-btn:hover{opacity:1}body:not(.dark-mode) #grounding-quick-toggle-btn:hover{background-color:var(--quote-bg-light)}body.dark-mode #grounding-quick-toggle-btn:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) #grounding-quick-toggle-btn.active{background-color:var(--strong-bg-light)}body.dark-mode #grounding-quick-toggle-btn.active{background-color:var(--strong-bg-dark)}#vision-weaver-panel{bottom:120px;height:520px;min-height:400px;min-width:300px;right:300px;width:380px}#vision-weaver-content{box-sizing:border-box;display:flex;flex-direction:column;height:100%;overflow:hidden;padding:15px}.vision-weaver-controls{display:flex;flex-shrink:0;gap:10px;margin-bottom:15px}.vision-weaver-btn{align-items:center;border:1px solid transparent;border-radius:8px;cursor:pointer;display:flex;flex:1;font-family:Gowun Batang,serif;font-size:1.05em;font-weight:700;gap:8px;justify-content:center;padding:12px;text-align:center;transition:all .2s}body:not(.dark-mode) #refined-generate-btn{background-color:var(--h2-color-light);color:#fff}body:not(.dark-mode) #refined-generate-btn:hover{background-color:#a88a68}body:not(.dark-mode) #quick-generate-btn{background-color:#f0f0f0;border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) #quick-generate-btn:hover{background-color:#e0e0e0;border-color:#ccc}body.dark-mode #refined-generate-btn{background-color:var(--h2-color-dark);color:var(--bg-color-dark)}body.dark-mode #refined-generate-btn:hover{background-color:#d4b28c}body.dark-mode #quick-generate-btn{background-color:#3a3a3a;border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode #quick-generate-btn:hover{background-color:#4a4a4a;border-color:#555}.vision-weaver-btn:disabled{cursor:not-allowed;opacity:.5}#image-panel-status{flex-shrink:0;font-weight:700;margin-bottom:15px;min-height:22px;text-align:center}#image-display-area{align-items:center;border-radius:8px;display:flex;flex-grow:1;justify-content:center;min-height:0;overflow:auto;padding:10px}body:not(.dark-mode) #image-display-area{background-color:var(--quote-bg-light);border:1px solid var(--border-color-light)}body.dark-mode #image-display-area{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark)}#image-display-area img{border-radius:6px;max-height:100%;max-width:100%;object-fit:contain}.vision-weaver-settings{max-width:550px;text-align:left}.vision-weaver-settings h3{align-items:center;display:flex;gap:10px;justify-content:center;margin-bottom:25px}.vision-weaver-settings .settings-section{border-bottom:1px solid;margin-bottom:20px;padding-bottom:20px}.vision-weaver-settings .settings-section:last-of-type{border-bottom:none;margin-bottom:0;padding-bottom:0}body:not(.dark-mode) .vision-weaver-settings .settings-section{border-color:var(--border-color-light)}body.dark-mode .vision-weaver-settings .settings-section{border-color:var(--border-color-dark)}.vision-weaver-settings label{display:block;font-size:1em;font-weight:700;margin-bottom:10px}.vision-weaver-settings select{background-color:var(--bg-color-dark);border:1px solid;border-radius:6px;box-sizing:border-box;color:var(--text-color-dark);font-family:Gowun Batang,serif;font-size:1em;padding:10px 12px;width:100%}body:not(.dark-mode) .vision-weaver-settings select{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode .vision-weaver-settings select{border-color:var(--border-color-dark)}.vision-weaver-settings small{display:block;font-size:.8em;margin-top:8px;opacity:.7}.vision-weaver-settings .api-choice{align-items:center;display:flex;justify-content:space-between;margin-bottom:10px}.vision-weaver-settings .api-choice span{opacity:.9}.vision-weaver-settings .api-choice select{width:150px}#vision-weaver-panel .panel-header .panel-controls{gap:0}.preset-main-controls{align-items:center;display:flex;gap:10px;margin-bottom:20px}#preset-editor-container{border-radius:8px;margin-bottom:10px;padding:15px}body:not(.dark-mode) #preset-editor-container{background-color:var(--quote-bg-light)}body.dark-mode #preset-editor-container{background-color:var(--quote-bg-dark)}.preset-url-group{margin-bottom:15px}.preset-url-group:last-child{margin-bottom:0}.preset-url-group label{font-size:.9em;margin-bottom:6px;opacity:.8}.preset-url-input-wrapper{align-items:center;display:flex;gap:10px}.preset-url-input-wrapper input{border:1px solid;border-radius:4px;flex-grow:1;font-size:.95em;padding:8px 10px}body:not(.dark-mode) .preset-url-input-wrapper input{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode .preset-url-input-wrapper input{background-color:var(--bg-color-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}.preset-preview{background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:4px;flex-shrink:0;height:40px;width:40px}body:not(.dark-mode) .preset-preview{background-color:#e9e4db;border:1px solid var(--border-color-light)}body.dark-mode .preset-preview{background-color:#2c2c2c;border:1px solid var(--border-color-dark)}.preset-url-fetch{flex-shrink:0;font-size:.9em;padding:8px 12px}.image-generation-options-modal{display:flex;flex-direction:column;height:85vh;max-height:750px;max-width:95vw;overflow:hidden;padding:0;text-align:left;width:1200px}.image-generation-options-modal h3{border-bottom:1px solid var(--border-color-dark);flex-shrink:0;margin:0;padding:15px 20px}body:not(.dark-mode) .image-generation-options-modal h3{border-color:var(--border-color-light)}.img-gen-studio-layout{display:flex;flex-grow:1;min-height:0}.img-gen-studio-left{border-right:1px solid var(--border-color-dark);display:flex;flex-direction:column;flex-shrink:0;gap:15px;padding:15px;width:350px}body:not(.dark-mode) .img-gen-studio-left{border-color:var(--border-color-light)}.img-gen-options-section,.img-gen-studio-right{display:flex;flex-direction:column;flex-grow:1}.img-gen-options-section{min-height:0}.img-gen-options-section:not(:last-child){flex-grow:0}.img-gen-options-section label{flex-shrink:0;font-size:.9em;font-weight:700;margin-bottom:8px}.img-gen-search-bar{border-radius:6px;box-sizing:border-box;padding:8px 12px;width:100%}body:not(.dark-mode) .img-gen-search-bar{border:1px solid var(--border-color-light)}body.dark-mode .img-gen-search-bar{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}#img-gen-options-textarea{border-radius:6px;box-sizing:border-box;flex-grow:1;font-family:Gowun Batang,serif;padding:8px 12px;resize:none;width:100%}body:not(.dark-mode) #img-gen-options-textarea{background-color:var(--bg-color-light);border:1px solid var(--border-color-light);color:var(--text-color-light)}body.dark-mode #img-gen-options-textarea{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}.img-gen-tabs-new{border-bottom:1px solid var(--border-color-dark);display:flex;flex-shrink:0;flex-wrap:wrap;gap:5px;padding:10px}body:not(.dark-mode) .img-gen-tabs-new{border-color:var(--border-color-light)}.img-gen-tab-btn{align-items:center;background:none;border:none;border-radius:6px;cursor:pointer;display:flex;font-family:Gowun Batang,serif;font-size:1em;gap:8px;opacity:.6;padding:8px 12px}body:not(.dark-mode) .img-gen-tab-btn{color:var(--text-color-light)}body.dark-mode .img-gen-tab-btn{color:var(--text-color-dark)}.img-gen-tab-btn .tab-text{display:none}@media (min-width:900px){.img-gen-tab-btn .tab-text{display:inline}}.img-gen-tab-btn.active{font-weight:700;opacity:1}body:not(.dark-mode) .img-gen-tab-btn.active{background-color:var(--quote-bg-light)}body.dark-mode .img-gen-tab-btn.active{background-color:var(--quote-bg-dark)}.img-gen-tab-panels-new{flex-grow:1;overflow-y:auto;padding:15px 15px 100px}.img-gen-tab-panel{display:none}.img-gen-tab-panel.active{display:block}.accordion-container{border-radius:6px;margin-bottom:10px;overflow:hidden;position:relative;z-index:1}.accordion-container:hover{overflow:visible;z-index:2}body:not(.dark-mode) .accordion-container{border:1px solid var(--border-color-light)}body.dark-mode .accordion-container{border:1px solid var(--border-color-dark)}.accordion-header{cursor:pointer;font-weight:700;padding:10px 15px;position:relative;transition:background-color .2s;user-select:none}.accordion-header:after{content:"▼";font-size:.8em;position:absolute;right:15px;transition:transform .2s}.accordion-header.expanded:after{transform:rotate(180deg)}body:not(.dark-mode) .accordion-header{background-color:var(--quote-bg-light)}body.dark-mode .accordion-header{background-color:var(--quote-bg-dark)}.accordion-content{display:grid;gap:10px;max-height:0;opacity:0;overflow:hidden;padding:0 15px;transition:max-height .3s ease-out,padding-top .3s ease-out,padding-bottom .3s ease-out,opacity .3s}.accordion-content.expanded{max-height:500px;opacity:1;overflow:visible;padding-bottom:15px;padding-top:15px}.option-btn-grid-5-col{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}.option-btn[data-prompt].hidden{display:none}.image-generation-options-modal .custom-modal-actions{border-top:1px solid var(--border-color-dark);flex-shrink:0;margin-top:auto;padding:15px 20px}body:not(.dark-mode) .image-generation-options-modal .custom-modal-actions{border-color:var(--border-color-light)}.option-btn[data-prompt]{border:1px solid;border-radius:16px;cursor:pointer;font-size:.9em;padding:8px 12px;text-align:center;transition:all .2s ease}body:not(.dark-mode) .option-btn[data-prompt]{background-color:transparent;border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) .option-btn[data-prompt]:hover{background-color:var(--quote-bg-light);border-color:#a88a68}body:not(.dark-mode) .option-btn[data-prompt].active{background-color:var(--h2-color-light);border-color:var(--h2-color-light);color:#fff;font-weight:700}body.dark-mode .option-btn[data-prompt]{background-color:transparent;border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode .option-btn[data-prompt]:hover{background-color:var(--quote-bg-dark);border-color:#d4b28c}body.dark-mode .option-btn[data-prompt].active{background-color:var(--h2-color-dark);border-color:var(--h2-color-dark);color:var(--bg-color-dark);font-weight:700}#img-gen-global-options .option-btn{align-items:center;border:1px solid;border-radius:16px;cursor:pointer;display:inline-flex;font-size:.9em;gap:6px;padding:8px 12px;text-align:center;transition:all .2s ease}body:not(.dark-mode) #img-gen-global-options .option-btn{background-color:transparent;border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) #img-gen-global-options .option-btn:hover{background-color:var(--quote-bg-light);border-color:#a88a68}body.dark-mode #img-gen-global-options .option-btn{background-color:transparent;border-color:var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode #img-gen-global-options .option-btn:hover{background-color:var(--quote-bg-dark);border-color:#d4b28c}body:not(.dark-mode) #img-gen-global-options .option-btn.active{background-color:var(--strong-bg-light);border-color:var(--h2-border-light);color:var(--header-color-light);font-weight:700}body.dark-mode #img-gen-global-options .option-btn.active{background-color:var(--strong-bg-dark);border-color:var(--h2-border-dark);color:var(--header-color-dark);font-weight:700}body:not(.dark-mode) #img-gen-remember-options-toggle.active{background-color:#d9edf7;border-color:#bce8f1;color:#31708f}body.dark-mode #img-gen-remember-options-toggle.active{background-color:#314550;border-color:#5bc0de;color:#5bc0de}.global-options-wrapper{align-items:flex-start;display:flex;gap:15px}#img-gen-global-options{flex-grow:1}#img-gen-studio-upload-section{align-items:center;display:flex;flex-shrink:0;gap:10px}#img-gen-studio-preview-wrapper{display:none;height:60px;position:relative;width:60px}#img-gen-studio-preview{background-position:50%;background-size:cover;border-radius:6px;height:100%;width:100%}body:not(.dark-mode) #img-gen-studio-preview{background-color:var(--quote-bg-light);border:1px dashed var(--border-color-light)}body.dark-mode #img-gen-studio-preview{background-color:var(--quote-bg-dark);border:1px dashed var(--border-color-dark)}#img-gen-studio-remove-btn{align-items:center;border:none;border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.2);cursor:pointer;display:flex;font-size:12px;font-weight:700;height:20px;justify-content:center;line-height:1;position:absolute;right:-5px;top:-5px;width:20px}body:not(.dark-mode) #img-gen-studio-remove-btn{background-color:#d9534f;color:#fff}body.dark-mode #img-gen-studio-remove-btn{background-color:#ef5350;color:#121212}#img-gen-studio-upload-btn{align-items:center;border-radius:8px;display:flex;height:60px;justify-content:center;padding:0;width:60px}body:not(.dark-mode) #img-gen-studio-upload-btn{background-color:var(--quote-bg-light);border:1px dashed var(--border-color-light);color:var(--sub-text-color-light)}body:not(.dark-mode) #img-gen-studio-upload-btn:hover{background-color:#e6e0d4;border-color:var(--h2-border-light);border-style:solid;color:var(--text-color-light)}body.dark-mode #img-gen-studio-upload-btn{background-color:var(--quote-bg-dark);border:1px dashed var(--border-color-dark);color:var(--text-color-dark)}body.dark-mode #img-gen-studio-upload-btn:hover{background-color:#444;border-color:var(--h2-border-dark);border-style:solid;color:var(--text-color-dark)}#img-gen-studio-upload-btn svg{height:24px;width:24px}body.dark-mode #img-gen-studio-upload-btn svg{fill:var(--text-color-dark)}.content-section.type-generated-image{align-items:center;border-bottom:1px solid;display:flex;flex-direction:column;gap:20px;justify-content:center;margin-bottom:25px;min-height:250px;padding-bottom:25px;padding-top:20px;position:relative;text-align:center}body:not(.dark-mode) .content-section.type-generated-image{border-color:var(--border-color-light)}body.dark-mode .content-section.type-generated-image{border-color:var(--border-color-dark)}.image-placeholder-skeleton{display:none}.placeholder-content{opacity:.7;text-align:center}.placeholder-actions{display:flex;gap:8px}.generated-image-wrapper{display:inline-block;max-width:100%;position:relative}.generated-image-wrapper:hover .image-overlay-controls{opacity:1}.image-overlay-controls{border-radius:12px;bottom:10px;display:flex;gap:6px;left:50%;opacity:0;padding:6px;position:absolute;transform:translateX(-50%);transition:opacity .3s ease-in-out}body:not(.dark-mode) .image-overlay-controls{backdrop-filter:blur(4px);background-color:hsla(43,47%,94%,.8);border:1px solid var(--border-color-light)}body.dark-mode .image-overlay-controls{backdrop-filter:blur(4px);background-color:rgba(30,30,30,.8);border:1px solid var(--border-color-dark)}.overlay-control-btn{align-items:center;background:none;border:none;border-radius:8px;cursor:pointer;display:inline-flex;font-family:Gowun Batang,serif;font-size:.85em;font-weight:700;gap:6px;line-height:1.2;padding:6px 12px;transition:all .2s;white-space:nowrap}.overlay-control-btn svg{fill:currentColor;height:16px;width:16px}body:not(.dark-mode) .overlay-control-btn{color:var(--text-color-light)}body:not(.dark-mode) .overlay-control-btn:hover{background-color:var(--quote-bg-light)}body.dark-mode .overlay-control-btn{color:var(--text-color-dark)}body.dark-mode .overlay-control-btn:hover{background-color:var(--quote-bg-dark)}.content-section.type-generated-image img{border-radius:8px;box-shadow:0 5px 20px rgba(0,0,0,.15);max-height:600px;max-width:100%;object-fit:contain;opacity:0;transition:opacity .5s ease-in-out}.content-section.type-generated-image.loaded img{opacity:1}.placeholder-action-btn{align-items:center;background:none;border:1px solid;border-radius:12px;cursor:pointer;display:inline-flex;font-family:Gowun Batang,serif;font-size:.8em;font-weight:700;gap:6px;line-height:0;opacity:.8;padding:4px 12px;transition:all .2s}.placeholder-action-btn:hover{opacity:1;transform:scale(1.05)}.placeholder-action-btn svg{fill:currentColor;height:14px;width:14px}body:not(.dark-mode) .placeholder-action-btn{background-color:var(--quote-bg-light);border-color:var(--border-color-light)}body:not(.dark-mode) .placeholder-action-btn.quick{color:#337ab7}body:not(.dark-mode) .placeholder-action-btn.refined{color:#5cb85c}body:not(.dark-mode) .placeholder-action-btn.options{color:#8e44ad}body:not(.dark-mode) .placeholder-action-btn.settings{color:var(--sub-text-color-light)}body:not(.dark-mode) .placeholder-action-btn:hover{background-color:#e6e0d4}body.dark-mode .placeholder-action-btn{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark)}body.dark-mode .placeholder-action-btn.quick{color:#5bc0de}body.dark-mode .placeholder-action-btn.refined{color:#98c379}body.dark-mode .placeholder-action-btn.options{color:#bb86fc}body.dark-mode .placeholder-action-btn.settings{color:var(--sub-text-color-dark)}body.dark-mode .placeholder-action-btn:hover{background-color:#444}.leaflet-image-layer,.leaflet-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane,.leaflet-pane>canvas,.leaflet-pane>svg,.leaflet-tile,.leaflet-tile-container,.leaflet-zoom-box{left:0;position:absolute;top:0}.leaflet-container{overflow:hidden}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{height:1600px;-webkit-transform-origin:0 0;width:1600px}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-height:none!important;max-width:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer{max-height:none!important;max-width:none!important;padding:0;width:auto}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{-moz-box-sizing:border-box;box-sizing:border-box;height:0;width:0;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{height:1px;width:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{pointer-events:visiblePainted;pointer-events:auto;position:relative;z-index:800}.leaflet-bottom,.leaflet-top{pointer-events:none;position:absolute;z-index:1000}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{clear:both;float:left}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-pan-anim .leaflet-tile,.leaflet-zoom-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-image-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-image-layer.leaflet-interactive,.leaflet-marker-icon.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{background:hsla(0,0%,100%,.5);border:2px dotted #38f}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{border-radius:4px;box-shadow:0 1px 5px rgba(0,0,0,.65)}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;color:#000;display:block;height:26px;line-height:26px;text-align:center;text-decoration:none;width:26px}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:focus,.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom:none;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.leaflet-bar a.leaflet-disabled{background-color:#f4f4f4;color:#bbb;cursor:default}.leaflet-touch .leaflet-bar a{height:30px;line-height:30px;width:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{background:#fff;border-radius:5px;box-shadow:0 1px 5px rgba(0,0,0,.4)}.leaflet-control-layers-toggle{background-image:url(images/layers.png);height:36px;width:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(images/layers-2x.png);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{height:44px;width:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{background:#fff;color:#333;padding:6px 10px 6px 6px}.leaflet-control-layers-scrollbar{overflow-x:hidden;overflow-y:scroll;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{border-top:1px solid #ddd;height:0;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(images/marker-icon.png)}.leaflet-container .leaflet-control-attribution{background:#fff;background:hsla(0,0%,100%,.8);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{color:#333;line-height:1.4;padding:0 5px}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:focus,.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;height:.6669em;vertical-align:baseline!important;width:1em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{background:hsla(0,0%,100%,.8);border:2px solid #777;border-top:none;-moz-box-sizing:border-box;box-sizing:border-box;line-height:1.1;padding:2px 5px 1px;text-shadow:1px 1px #fff;white-space:nowrap}.leaflet-control-scale-line:not(:first-child){border-bottom:none;border-top:2px solid #777;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{background-clip:padding-box;border:2px solid rgba(0,0,0,.2)}.leaflet-popup{margin-bottom:20px;position:absolute;text-align:center}.leaflet-popup-content-wrapper{border-radius:12px;padding:1px;text-align:left}.leaflet-popup-content{font-size:13px;font-size:1.08333em;line-height:1.3;margin:13px 24px 13px 20px;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{height:20px;left:50%;margin-left:-20px;margin-top:-1px;overflow:hidden;pointer-events:none;position:absolute;width:40px}.leaflet-popup-tip{height:17px;margin:-10px auto 0;padding:1px;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);width:17px}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 14px rgba(0,0,0,.4);color:#333}.leaflet-container a.leaflet-popup-close-button{background:transparent;border:none;color:#757575;font:16px/24px Tahoma,Verdana,sans-serif;height:24px;position:absolute;right:0;text-align:center;text-decoration:none;top:0;width:24px}.leaflet-container a.leaflet-popup-close-button:focus,.leaflet-container a.leaflet-popup-close-button:hover{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678);margin:0 auto;width:24px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{background-color:#fff;border:1px solid #fff;border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.4);color:#222;padding:6px;pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{background:transparent;border:6px solid transparent;content:"";pointer-events:none;position:absolute}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{border-top-color:#fff;bottom:0;margin-bottom:-12px}.leaflet-tooltip-bottom:before{border-bottom-color:#fff;margin-left:-6px;margin-top:-12px;top:0}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{margin-top:-6px;top:50%}.leaflet-tooltip-left:before{border-left-color:#fff;margin-right:-12px;right:0}.leaflet-tooltip-right:before{border-right-color:#fff;left:0;margin-left:-12px}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}